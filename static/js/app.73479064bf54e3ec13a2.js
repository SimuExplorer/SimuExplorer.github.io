webpackJsonp([1],{"1TIg":function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},"8Rdi":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set__=__webpack_require__("lHA8"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set__),__WEBPACK_IMPORTED_MODULE_1__services_Markov__=__webpack_require__("zi0F"),__WEBPACK_IMPORTED_MODULE_2__variables_scss__=__webpack_require__("UuEb"),__WEBPACK_IMPORTED_MODULE_2__variables_scss___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__variables_scss__),__WEBPACK_IMPORTED_MODULE_3_d3__=__webpack_require__("vwbq"),precision=1e-5;__webpack_exports__.a={name:"WinDisMatrix",props:["transMatrix","playerSet","state0Prop","endState","dim","stateArray","StateID_index","Index_StateID","K","B","start","playerWinDis","chooseName"],data:function(){return{advanceColor:__WEBPACK_IMPORTED_MODULE_2__variables_scss__.advanceColor,reduceColor:__WEBPACK_IMPORTED_MODULE_2__variables_scss__.reduceColor,player0:__WEBPACK_IMPORTED_MODULE_2__variables_scss__.player0,player1:__WEBPACK_IMPORTED_MODULE_2__variables_scss__.player1,btn1:!0,btn2:!1,selectNow:{stroke1:{strikeTech:null,ballPos:null},stroke2:{strikeTech:null,ballPos:null}},player:0,quantileUpRect:.9,quantileUpBar:.5,thresholdRect:null,thresholdBar:null,winShiftMatrix:new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,winDisMatrix:new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,winDisMatrixTest:new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,draw:{width:0,height:0,padding:4,gap:2,split:8,labelArea:60},matrix:{matrixHeightReal:null,matrixWidthReal:null,transformY:null,transformX:null,rectSize:null,row:null,col:null,rowEnd:null,colEnd:null,rects:null,rowBar:null},label:{row:{},col:{},cover:{}},tooltip:{width:100,height:40,matrix:{x:null,y:null,dif:null,show:!1},matrixRight:{x:null,y:null,dif:null,show:!1},matrixBottom:{x:null,y:null,dif:null,show:!1},bar:{x:null,y:null,dif:null,show:!1},barRight:{x:null,y:null,dif:null,show:!1}}}},mounted:function(){this.$nextTick(this.onResize())},computed:{childLabelWidth:function(){return 30},childLabelHeight:function(){return this.matrix.rectSize-3>16?16:this.matrix.rectSize-3},parentLabelHeight:function(){return 16},winRate0:function(){if(this.playerWinDis)return this.endState?this.endState.proArray[this.dim-2]:void 0},matrixAreaWidth:function(){return this.draw.width-this.draw.labelArea-2*this.draw.padding},matrixAreaHeight:function(){return this.draw.height-1*this.draw.labelArea-2*this.draw.padding}},watch:{winRate0:function(){this.winShiftMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.winDisMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.calcDisWinRate(),this.drawDisWin()},K:function(){this.winShiftMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.winDisMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.calcDisWinRate(),this.drawDisWin()},start:function(){this.winShiftMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.winDisMatrix=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.g,this.calcDisWinRate(),this.drawDisWin()}},methods:{onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight},drawDisWin:function drawDisWin(){var vm=this,stat1=[],stat2=[];vm.winDisMatrix.matrix.forEach(function(t,i){t.forEach(function(t,i){t.winPro&&0!==t.winPro&&stat1.push(Math.abs(t.winPro))})}),vm.winDisMatrix.group.forEach(function(t,i){t.winPro&&0!==t.winPro&&stat2.push(Math.abs(t.winPro))}),vm.thresholdRect=__WEBPACK_IMPORTED_MODULE_3_d3__.h(stat1,vm.quantileUpRect),vm.thresholdBar=__WEBPACK_IMPORTED_MODULE_3_d3__.h(stat2,vm.quantileUpBar);var show={row:new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default.a,col:new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default.a},showGroup={row:new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default.a,col:new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default.a};vm.winDisMatrix.matrix.forEach(function(t,i){t.forEach(function(t,a){0!==t.winPro&&Math.abs(t.winPro)>vm.thresholdRect&&(show.row.add(i),show.col.add(a),showGroup.row.add(vm.childMapParent(i)),showGroup.col.add(vm.childMapParent(a)))})}),vm.winDisMatrix.group.forEach(function(t,i){0!==t.winPro&&Math.abs(t.winPro)>vm.thresholdBar&&show.row.add(i)});var splitNumRow=showGroup.row.size,splitNumCol=showGroup.col.size,rectSizeFromWidth=Math.round((vm.matrixAreaWidth-vm.draw.split*splitNumRow)/show.row.size),rectSizeFromHeight=Math.round((vm.matrixAreaHeight-vm.draw.split*splitNumCol)/show.col.size);vm.matrix.rectSize=Math.min(rectSizeFromWidth,rectSizeFromHeight);var rectSize=vm.matrix.rectSize,rowNow=0,colNow=0,rowNowEnd=0,colNowEnd=0;vm.matrix.row=[],vm.matrix.col=[],vm.matrix.rowEnd=[],vm.matrix.colEnd=[],vm.matrix.rects=[],vm.matrix.rowBar=[];for(var i=0;i<vm.winDisMatrix.matrix.length;i++)vm.matrix.row.push(rowNow),vm.matrix.col.push(colNow),show.row.has(i)&&(rowNowEnd=rowNow+rectSize,rowNow+=rectSize),show.col.has(i)&&(colNowEnd=colNow+rectSize,colNow+=rectSize),8!==i&&11!==i&&14!==i&&17!==i&&23!==i||(showGroup.row.has(vm.childMapParent(i))&&(rowNow+=vm.draw.split),showGroup.col.has(vm.childMapParent(i))&&(colNow+=vm.draw.split)),vm.matrix.rowEnd.push(rowNowEnd),vm.matrix.colEnd.push(colNowEnd);vm.matrix.matrixHeightReal=colNow,vm.matrix.matrixWidthReal=rowNow,vm.matrix.transformY=(vm.draw.height-vm.draw.padding-vm.matrix.matrixHeightReal-vm.draw.labelArea)/2+vm.draw.labelArea,vm.matrix.transformX=(vm.draw.width-vm.draw.padding-vm.matrix.matrixWidthReal-vm.draw.labelArea)/2;var scaleW=__WEBPACK_IMPORTED_MODULE_3_d3__.l().domain([__WEBPACK_IMPORTED_MODULE_3_d3__.e(stat1),__WEBPACK_IMPORTED_MODULE_3_d3__.d(stat1)]).range([4,rectSize-4]),scaleR=__WEBPACK_IMPORTED_MODULE_3_d3__.l().domain([__WEBPACK_IMPORTED_MODULE_3_d3__.e(stat1),__WEBPACK_IMPORTED_MODULE_3_d3__.d(stat1)]).range([2,rectSize/2-2]);vm.winDisMatrix.matrix.forEach(function(t,i){var a=[];t.forEach(function(t,e){var r=t.winPro;show.row.has(i)&&show.col.has(e)?a.push({stateID:t.stateID,id:27*i+e,x:vm.matrix.row[i],y:vm.matrix.col[e],indexr:i,indexl:e,value:100*r,width:rectSize,height:rectSize,cx:vm.matrix.row[i]+rectSize/2,cy:vm.matrix.col[e]+rectSize/2,r:0===r?0:scaleR(Math.abs(r)),widthDis:0===r?0:scaleW(Math.abs(r)),isNeg:r<0,isHighlight:!1,selected:!1}):a.push({stateID:t.stateID,id:27*i+e,x:vm.matrix.row[i],y:vm.matrix.col[e],indexr:i,indexl:e,value:0,width:0,height:0,cx:vm.matrix.row[i],cy:vm.matrix.col[e],r:0,widthDis:0,isNeg:!1,isHighlight:!1,selected:!1})}),vm.matrix.rects.push(a)});var scaleY=__WEBPACK_IMPORTED_MODULE_3_d3__.k().domain([0,__WEBPACK_IMPORTED_MODULE_3_d3__.d(stat2)]).range([1,vm.draw.labelArea]);vm.winDisMatrix.group.forEach(function(t,i){var a=t.winPro;if(show.row.has(i)){var e=scaleY(Math.abs(a));vm.matrix.rowBar.push({stateID:t.stateID,x:vm.matrix.row[i]+1,y:-e,indexr:i,value:100*a,width:vm.matrix.rectSize-2,height:e,isNeg:a<0,isHighlight:!1,selected:!1})}else vm.matrix.rowBar.push({stateID:t.stateID,x:vm.matrix.row[i],y:0,indexr:i,value:0,width:vm.matrix.rectSize-2,height:0,isNeg:!1,isHighlight:!1,selected:!1})}),vm.label.row.childLine=[],vm.label.row.childLabel=[];for(var rowChildLine=vm.label.row.childLine,rowChildLabel=vm.label.row.childLabel,indexr=0;indexr<vm.matrix.row.length;indexr++){var labels=vm.winDisMatrix.getMatrixLabel(indexr).split("_");show.row.has(indexr)?(rowChildLabel.push({x:vm.matrix.row[indexr]+vm.matrix.rectSize/2,show:!0,childLabel:labels[1],parentLabel:labels[0],isHighlight:!1}),rowChildLine.push({x:vm.matrix.row[indexr]+vm.matrix.rectSize/2,show:!0,isHighlight:!1})):(rowChildLabel.push({x:vm.matrix.row[indexr],show:!1,childLabel:labels[1],parentLabel:labels[0],isHighlight:!1}),rowChildLine.push({x:vm.matrix.row[indexr],show:!1,isHighlight:!1}))}vm.label.col.childLine=[],vm.label.col.childLabel=[];for(var colChildLine=vm.label.col.childLine,colChildLabel=vm.label.col.childLabel,indexl=0;indexl<vm.matrix.col.length;indexl++){var _labels=vm.winDisMatrix.getMatrixLabel(indexl).split("_");show.col.has(indexl)?(colChildLabel.push({y:vm.matrix.col[indexl]+vm.matrix.rectSize/2,show:!0,childLabel:_labels[1],parentLabel:_labels[0],isHighlight:!1}),colChildLine.push({y:vm.matrix.col[indexl]+vm.matrix.rectSize/2,show:!0,isHighlight:!1})):(colChildLabel.push({y:vm.matrix.col[indexl],show:!1,childLabel:_labels[1],parentLabel:_labels[0],isHighlight:!1}),colChildLine.push({y:vm.matrix.col[indexl],show:!1,isHighlight:!1}))}vm.label.row.parentLabel=[];var rowParLabel=vm.label.row.parentLabel,rowTempLabel={},rowTempText="";rowChildLabel.forEach(function(t,i){if(t.parentLabel!==rowTempText)rowTempLabel.text&&rowParLabel.push(rowTempLabel),rowTempLabel={x1:vm.matrix.row[i],x2:vm.matrix.rowEnd[i],text:"loop"===t.parentLabel?"topspin":t.parentLabel,type:vm.matrix.rowEnd[i]-vm.matrix.row[i]>vm.draw.gap?1:0,isHighlight:!1,startIndex:i,endIndex:i},rowTempText=t.parentLabel;else{rowTempLabel.x2=vm.matrix.rowEnd[i],rowTempLabel.endIndex=i;var a=rowTempLabel.x2-rowTempLabel.x1;show.row.has(i)&&(rowTempLabel.type=1,a>1.5*rectSize&&(rowTempLabel.type=2))}}),rowParLabel.push(rowTempLabel),vm.label.col.parentLabel=[];var colParLabel=vm.label.col.parentLabel,colTempLabel={},colTempText="";colChildLabel.forEach(function(t,i){if(t.parentLabel!==colTempText)colTempLabel.text&&colParLabel.push(colTempLabel),colTempLabel={y1:vm.matrix.col[i],y2:vm.matrix.colEnd[i],text:"loop"===t.parentLabel?"topspin":t.parentLabel,type:vm.matrix.colEnd[i]-vm.matrix.col[i]>vm.draw.gap?1:0,isHighlight:!1,startIndex:i,endIndex:i},colTempText=t.parentLabel;else{colTempLabel.y2=vm.matrix.colEnd[i],colTempLabel.endIndex=i;var a=colTempLabel.y2-colTempLabel.y1;show.col.has(i)&&(colTempLabel.type=1,a>1.5*rectSize&&(colTempLabel.type=2))}}),colParLabel.push(colTempLabel),vm.label.cover=[],vm.label.row.parentLabel.forEach(function(row,indexr){vm.label.col.parentLabel.forEach(function(col,indexc){for(var startX=row.startIndex,endX=row.endIndex,startY=col.startIndex,endY=col.endIndex,valueArray=[],indexX=startX;indexX<=endX;indexX++)for(var indexY=startY;indexY<=endY;indexY++)valueArray.push(vm.matrix.rects[indexX][indexY].value);var averageValue=eval(valueArray.join("+"))/valueArray.length,isNeg=averageValue<0,isZero=Math.abs(averageValue)<1e-10,coverTemp={x1:row.x1,x2:row.x2,y1:col.y1,y2:col.y2,width:row.x2-row.x1,height:col.y2-col.y1,isShow:!0,isNeg:isNeg,isZero:isZero,value:2*averageValue};console.log(averageValue),vm.label.cover.push(coverTemp)})})},showTooltipMatrix:function(t){var i=this,a=t.x+t.width/2,e=t.y-1-8-i.tooltip.height;a-i.tooltip.width/2<0?(i.tooltip.matrixRight.x=t.x+t.width+1,i.tooltip.matrixRight.y=t.y+t.height/2,i.tooltip.matrixRight.dif=t.value.toFixed(2),i.tooltip.matrixRight.show=!0):e<0?(i.tooltip.matrixBottom.x=a,i.tooltip.matrixBottom.y=t.y+t.height+1,i.tooltip.matrixBottom.dif=t.value.toFixed(2),i.tooltip.matrixBottom.show=!0):(i.tooltip.matrix.x=a,i.tooltip.matrix.y=t.y-1,i.tooltip.matrix.dif=t.value.toFixed(2),i.tooltip.matrix.show=!0)},hideTooltipMatrix:function(){this.tooltip.matrix.show=!1,this.tooltip.matrixBottom.show=!1,this.tooltip.matrixRight.show=!1},showTooltipBar:function(t){var i=this,a=t.x+t.width/2;a-i.tooltip.width/2<0?(i.tooltip.barRight.x=t.x+t.width+1,i.tooltip.barRight.y=t.y+t.height/2,i.tooltip.barRight.dif=t.value.toFixed(2),i.tooltip.barRight.show=!0):(i.tooltip.bar.x=a,i.tooltip.bar.y=t.y-1,i.tooltip.bar.dif=t.value.toFixed(2),i.tooltip.bar.show=!0)},hideTooltipBar:function(){this.tooltip.bar.show=!1,this.tooltip.barRight.show=!1},setCoverState:function(t){var i=!this.label.cover[t].isShow;this.label.cover[t].isShow=i},setShift:function(t,i,a){if(console.log("stateID: "+t),-1!==t){var e=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.d(t);this.selectNow.stroke1.strikeTech=e.StrikeTechName1,this.selectNow.stroke1.ballPos=e.BallPositionName1,"single"===i?(this.selectNow.stroke2.strikeTech=e.StrikeTechName2,this.selectNow.stroke2.ballPos=e.BallPositionName2):(this.selectNow.stroke2.strikeTech=null,this.selectNow.stroke2.ballPos=null),this.matrix.rects.forEach(function(t){t.forEach(function(t){t.selected=!1})}),this.matrix.rowBar.forEach(function(t){t.selected=!1}),a.selected=!0,this.$emit("setShift",[t,i])}},mouseoverMatrixRect:function(t,i,a){t.value&&(this.showTooltipMatrix(t),this.highlightMatrix(i,a))},mouseleaveMatrixRect:function(t){this.hideTooltipMatrix(t),this.recoverAll()},mouseoverParLabelRow:function(t,i){t.type&&this.highlightParentRow(i)},mouseoverParLabelCol:function(t,i){t.type&&this.highlightParentCol(i)},mouseoverBar:function(t,i){var a=this.childMapParent(i);this.showTooltipBar(t),this.highlightLine(this.label.row.childLabel,i),this.highlightLine(this.label.row.parentLabel,a)},mouseleaveBar:function(t){this.hideTooltipBar(t),this.recoverAll()},highlightParentRow:function(t){var i=this,a=i.parentMapChild(t);i.highlightLine(i.label.row.parentLabel,t),i.highlightLines(i.label.row.childLabel,a),i.highlightLines(i.label.row.childLine,a),i.highlightMatrixRows(i.matrix.rects,a)},highlightParentCol:function(t){var i=this,a=i.parentMapChild(t);i.highlightLine(i.label.col.parentLabel,t),i.highlightLines(i.label.col.childLabel,a),i.highlightLines(i.label.col.childLine,a),i.highlightMatrixCols(i.matrix.rects,a)},highlightChildRow:function(t){var i=this,a=i.childMapParent(t);i.highlightLine(i.label.row.parentLabel,a),i.highlightLine(i.label.row.childLabel,t),i.highlightLine(i.label.row.childLine,t),i.highlightMatrixRow(i.matrix.rects,t)},highlightChildCol:function(t){var i=this,a=i.childMapParent(t);i.highlightLine(i.label.col.parentLabel,a),i.highlightLine(i.label.col.childLabel,t),i.highlightLine(i.label.col.childLine,t),i.highlightMatrixCol(i.matrix.rects,t)},highlightMatrix:function(t,i){var a=this,e=a.childMapParent(t),r=a.childMapParent(i);a.highlightLine(a.label.row.parentLabel,e),a.highlightLine(a.label.col.parentLabel,r),a.highlightLine(a.label.row.childLabel,t),a.highlightLine(a.label.col.childLabel,i),a.highlightLine(a.label.row.childLine,t),a.highlightLine(a.label.col.childLine,i),a.highlightMatrixSingle(a.matrix.rects,t,i)},childMapParent:function(t){return t<9?0:t<12?1:t<15?2:t<18?3:t<24?4:5},parentMapChild:function(t){switch(t){case 0:return[0,1,2,3,4,5,6,7,8];case 1:return[9,10,11];case 2:return[12,13,14];case 3:return[15,16,17];case 4:return[18,19,20,21,22,23];case 5:return[24,25,26]}},highlightLine:function(t,i){t&&t.length&&t.forEach(function(t,a){t.isHighlight=a===i})},highlightLines:function(t,i){t&&t.length&&t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})},highlightMatrixRow:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,e){t.isHighlight=a===i})})},highlightMatrixRows:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,e){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixCol:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){t.isHighlight=a===i})})},highlightMatrixCols:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixSingle:function(t,i,a){t&&t.length&&t.forEach(function(t,e){t.forEach(function(t,r){t.isHighlight=e===i||r===a})})},recoverLine:function(t){t&&t.length&&t.forEach(function(t){t.isHighlight=!1})},recoverMatrix:function(t){t&&t.length&&t.forEach(function(t){t.forEach(function(t){t.isHighlight=!1})})},recoverAll:function(){var t=this;t.recoverLine(t.label.row.parentLabel),t.recoverLine(t.label.col.parentLabel),t.recoverLine(t.label.row.childLabel),t.recoverLine(t.label.col.childLabel),t.recoverLine(t.label.row.childLine),t.recoverLine(t.label.col.childLine),t.recoverMatrix(t.matrix.rects)},calcShiftWinRate:function(t){console.log("start: "+t);var i=this;i.state0Prop.forEach(function(a,e){var r=i.Index_StateID[e];if(r%2===i.player){if(r<198)if(t)i.winShiftMatrix.setWinState(i.winRate0,r);else{var s=1,o=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.a(i.state0Prop,i.stateArray).shiftPro(r,i.StateID_index,i.K,i.B),l=void 0;do{o=(l=o).calcNextMarkovState(i.transMatrix),s++}while((Math.abs(l.proArray[i.dim-2]-o.proArray[i.dim-2])>precision||Math.abs(l.proArray[i.dim-1]-o.proArray[i.dim-1])>precision||0===l.proArray[i.dim-1]||0===l.proArray[i.dim-2])&&s<35);i.winShiftMatrix.setWinState(o.proArray[i.dim-1-!i.player],r)}if(r<486&&r>=198){var n=1,h=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.a(i.state0Prop,i.stateArray),c=void 0;do{h=(c=h).calcNextMarkovState(i.transMatrix),n%2===t&&(h=h.shiftPro(r,i.StateID_index,i.K,i.B)),n++}while((Math.abs(c.proArray[i.dim-2]-h.proArray[i.dim-2])>precision||Math.abs(c.proArray[i.dim-1]-h.proArray[i.dim-1])>precision||0===c.proArray[i.dim-1]||0===c.proArray[i.dim-2])&&n<35);i.winShiftMatrix.setWinState(h.proArray[i.dim-1-!i.player],r)}}})},calcShiftWinRateGroup:function(t){var i=this,a=new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default.a;i.state0Prop.forEach(function(e,r){var s=i.Index_StateID[r],o=i.winShiftMatrix.judgeHasShift(s,a);if(o>-1&&s%2===i.player){if(s<198)if(t)i.winShiftMatrix.setWinStateGroup(i.winRate0,o,s),a.add(o);else{var l=1,n=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.a(i.state0Prop,i.stateArray).shiftProGroup(s,i.StateID_index,i.K,i.B),h=void 0;do{n=(h=n).calcNextMarkovState(i.transMatrix),l++}while((Math.abs(h.proArray[i.dim-2]-n.proArray[i.dim-2])>precision||Math.abs(h.proArray[i.dim-1]-n.proArray[i.dim-1])>precision||0===h.proArray[i.dim-1]||0===h.proArray[i.dim-2])&&l<35);i.winShiftMatrix.setWinStateGroup(n.proArray[i.dim-1-!i.player],o,s),a.add(o)}if(s<486&&s>=198){var c=1,d=new __WEBPACK_IMPORTED_MODULE_1__services_Markov__.a(i.state0Prop,i.stateArray),u=void 0;do{d=(u=d).calcNextMarkovState(i.transMatrix),c%2===t&&(d=d.shiftProGroup(s,i.StateID_index,i.K,i.B)),c++}while((Math.abs(u.proArray[i.dim-2]-d.proArray[i.dim-2])>precision||Math.abs(u.proArray[i.dim-1]-d.proArray[i.dim-1])>precision||0===u.proArray[i.dim-1]||0===u.proArray[i.dim-2])&&c<35);i.winShiftMatrix.setWinStateGroup(d.proArray[i.dim-1-!i.player],o,s),a.add(o)}}})},calcDisWinRate:function(){var t=this;t.playerWinDis[t.chooseName].forEach(function(i,a){a<486&&i&&t.winDisMatrix.setWinState(i,a)})}}}},C2kv:function(t,i){},D4uH:function(t,i,a){"use strict";var e=a("bOdI"),r=a.n(e),s={},o={name:"fa-icon",props:{name:{type:String,validator:function(t){return!t||t in s||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return r()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,i=t.width,a=t.height;return Math.max(i,a)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,i={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,a,e){var r="fa-"+(l++).toString(16);return i[e]=r,' id="'+r+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,a,e,r){var s=a||r;return s&&i[s]?"#"+i[s]:t}),t}},mounted:function(){var t=this;if(this.name||0!==this.$children.length){if(!this.icon){var i=0,a=0;this.$children.forEach(function(e){e.outerScale=t.normalizedScale,i=Math.max(i,e.width),a=Math.max(a,e.height)}),this.childrenWidth=i,this.childrenHeight=a,this.$children.forEach(function(t){t.x=(i-t.width)/2,t.y=(a-t.height)/2})}}else console.warn('Invalid prop: prop "name" is required.')},register:function(t){for(var i in t){var a=t[i];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),s[i]=a}},icons:s},l=870711;var n={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(i,e){return a("path",t._b({key:"path-"+e},"path",i,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(i,e){return a("polygon",t._b({key:"polygon-"+e},"polygon",i,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[a("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var h=a("VU/8")(o,n,!1,function(t){a("C2kv")},null,null);i.a=h.exports},NHnr:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("7+uW"),r=a("r9BZ"),s={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"players-view"}},[a("div",{staticClass:"view-header"},[a("div",{staticClass:"view-title"},[t._v("Player View")]),t._v(" "),a("div",{staticClass:"button-container"},[a("div",{staticClass:"btn-group",attrs:{id:"switchServeButton"}},[a("button",{staticClass:"btn switchBtn",class:{choose:t.serveBtn.btn1},attrs:{type:"button"},on:{click:function(i){return t.setStart(0)}}},[t._v("Serve")]),t._v(" "),a("button",{staticClass:"btn switchBtn",class:{choose:t.serveBtn.btn2},attrs:{type:"button"},on:{click:function(i){return t.setStart(1)}}},[t._v("Receive")])]),t._v(" "),a("div",{staticClass:"btn-group",attrs:{id:"fileListSelect"}},[a("button",{staticClass:"btn switchBtn",class:{choose:t.genderSelectBtn.btn1},attrs:{type:"button"},on:{click:function(i){return t.setGender(0)}}},[t._v("Male")]),t._v(" "),a("button",{staticClass:"btn switchBtn",class:{choose:t.genderSelectBtn.btn2},attrs:{type:"button"},on:{click:function(i){return t.setGender(1)}}},[t._v("Female")])])])]),t._v(" "),a("div",{attrs:{id:"svg-container"}},[a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},t._l(t.players,function(i,e){return a("g",{key:"player"+e,staticClass:"player",attrs:{transform:"translate(20, 0)"}},[a("rect",{staticClass:"player-button",class:{hover:i.isHover,selected:i.isSelected},attrs:{x:i.buttonX,y:i.buttonY,width:t.buttonWidth,height:t.buttonHeight,rx:"5",ry:"5"},on:{mouseover:function(a){return t.mouseoverPlayer(i)},mouseleave:function(a){return t.mouseleavePlayer(i)},click:function(a){return t.clickPlayer(i,e)}}}),t._v(" "),a("text",{staticClass:"player-name",class:{hover:i.isHover,selected:i.isSelected},style:"font-size: "+t.buttonHeight/30+"rem",attrs:{x:i.buttonX+t.buttonWidth/2,y:i.centralY}},[t._v("\n            "+t._s(i.nameEn)+"\n          ")]),t._v(" "),a("g",{staticClass:"player-polygonal",attrs:{transform:"translate("+(t.buttonWidth+5)+", "+(i.buttonY+t.buttonHeight/2)+")"}},[a("line",{staticClass:"base",attrs:{x1:t.lineWidth/4-42.5-5,y1:0,x2:t.lineWidth/4-42.5+85,y2:0}}),t._v(" "),a("line",{staticClass:"base",attrs:{x1:t.lineWidth/4-42.5-5,y1:-15,x2:t.lineWidth/4-42.5,y2:-15}}),t._v(" "),a("line",{staticClass:"base",attrs:{x1:t.lineWidth/4-42.5,y1:-15,x2:t.lineWidth/4-42.5,y2:15}}),t._v(" "),a("line",{staticClass:"base",attrs:{x1:t.lineWidth/4-42.5-5,y1:15,x2:t.lineWidth/4-42.5,y2:15}}),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.lineWidth/4-42.5-15,y:5}},[t._v("0")]),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.lineWidth/4-42.5-39,y:18}},[t._v("-0.2%")]),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.lineWidth/4-42.5-35,y:-12}},[t._v(" 0.2%")]),t._v(" "),a("line",{staticClass:"base",attrs:{x1:3*t.lineWidth/4-42.5,y1:0,x2:3*t.lineWidth/4-42.5+85,y2:0}}),t._v(" "),t._l(i.rowBar,function(i,e){return a("rect",{key:"rowBar"+e,attrs:{x:t.lineWidth/4-42.5+15*e,y:i.isNeg?0:-i.value,width:10,height:i.value,fill:i.isNeg?""+t.reduceColor:""+t.advanceColor}})}),t._v(" "),t._l(i.colBar,function(i,e){return a("rect",{key:"colBar"+e,attrs:{x:3*t.lineWidth/4-42.5+15*e,y:i.isNeg?0:-i.value,width:10,height:i.value,fill:i.isNeg?""+t.reduceColor:""+t.advanceColor}})})],2)])}),0)])])])},staticRenderFns:[]};var o=function(t){a("ewQB")},l=a("VU/8")(r.a,s,!1,o,null,null).exports,n=a("8Rdi"),h={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"windismatrix-view"}},[t._m(0),t._v(" "),a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},[t.matrix.transformY>0?a("g",{attrs:{transform:"translate("+t.matrix.transformX+", "+t.matrix.transformY+")"}},[a("g",{staticClass:"matrix",attrs:{id:"winDisMatrix"}},[a("g",{staticClass:"side-rect",attrs:{id:"side-rect",transform:"translate("+t.matrix.matrixWidthReal+", "+-55+")"}},[a("path",{attrs:{d:"M2,0 L55,0 L2,53 L2,0",fill:""+t.player0}}),t._v(" "),a("path",{attrs:{d:"M55,0 L55,53 L2,53 L55,0",fill:""+t.player1}})]),t._v(" "),a("rect",{attrs:{x:"0",y:"-55",width:t.matrix.matrixWidthReal,height:"55",fill:""+t.player0}}),t._v(" "),a("rect",{attrs:{x:"0",y:"0",width:"55",height:t.matrix.matrixHeightReal,fill:""+t.player1,transform:"translate("+t.matrix.matrixWidthReal+", 0)"}}),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"rowLabel-child"}},[t._l(t.label.row.childLine,function(i,e){return i.show?a("line",{key:"line"+e,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:i.x,x2:i.x,y1:0,y2:-50}}):t._e()}),t._v(" "),t._l(t.label.row.childLabel,function(i,e){return i.show?a("g",{key:"label"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightChildRow(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:i.x-t.childLabelHeight/2,y:-5-t.childLabelWidth,width:t.childLabelHeight,height:t.childLabelWidth}}),t._v(" "),a("text",{staticClass:"child",style:"font-size: "+.05*t.childLabelHeight+"rem",attrs:{transform:"translate("+i.x+", "+(-5-t.childLabelWidth/2)+") rotate(90)",x:0,y:0}},[t._v(t._s(i.childLabel))])]):t._e()})],2),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"rowLabel-parent"}},t._l(t.label.row.parentLabel,function(i,e){return a("g",{key:"label"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverParLabelRow(i,e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:i.x1+1,y:5-t.draw.labelArea,width:i.x2-i.x1-2,height:t.parentLabelHeight}}),t._v(" "),2===i.type?a("text",{staticClass:"parent",style:"font-size: "+.05*t.parentLabelHeight+"rem",attrs:{x:(i.x1+i.x2)/2,y:5-t.draw.labelArea+t.parentLabelHeight/2}},[t._v(t._s(i.text))]):1===i.type?a("text",{staticClass:"parent",style:"font-size: "+.05*t.parentLabelHeight+"rem",attrs:{x:(i.x1+i.x2)/2,y:5-t.draw.labelArea+t.parentLabelHeight/2}},[t._v(t._s(i.text.slice(0,3)))]):t._e()])}),0),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"colLabel-child",transform:"translate("+t.matrix.matrixWidthReal+", 0)"}},[t._l(t.label.col.childLine,function(i,e){return i.show?a("line",{key:"line"+e,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:-8,x2:50,y1:i.y,y2:i.y}}):t._e()}),t._v(" "),t._l(t.label.col.childLabel,function(i,e){return i.show?a("g",{key:"label"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightChildCol(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:5,y:i.y-t.childLabelHeight/2,width:t.childLabelWidth,height:t.childLabelHeight}}),t._v(" "),a("text",{staticClass:"child",style:"font-size: "+.05*t.childLabelHeight+"rem",attrs:{x:5+t.childLabelWidth/2,y:i.y}},[t._v(t._s(i.childLabel))])]):t._e()})],2),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"colLabel-parent",transform:"translate("+t.matrix.matrixWidthReal+", 0)"}},t._l(t.label.col.parentLabel,function(i,e){return a("g",{key:"label"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverParLabelCol(i,e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:t.draw.labelArea-t.parentLabelHeight-5,y:i.y1+1,width:t.parentLabelHeight,height:i.y2-i.y1-2}}),t._v(" "),2===i.type?a("text",{staticClass:"parent",style:"font-size: "+.05*t.parentLabelHeight+"rem",attrs:{transform:"translate("+(t.draw.labelArea-t.parentLabelHeight/2-5)+", "+(i.y1+i.y2)/2+") rotate(90)"}},[t._v(t._s(i.text))]):1===i.type?a("text",{staticClass:"parent",style:"font-size: "+.05*t.parentLabelHeight+"rem",attrs:{transform:"translate("+(t.draw.labelArea-t.parentLabelHeight/2-5)+", "+(i.y1+i.y2)/2+") rotate(90)"}},[t._v(t._s(i.text.slice(0,3)))]):t._e()])}),0),t._v(" "),t._l(t.matrix.rects,function(i,e){return a("g",{key:"row"+e,staticClass:"row"},[t._l(i,function(i,r){return a("rect",{key:"back"+r,staticClass:"back",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:i.width,height:i.height},on:{click:function(a){return t.setShift(i.stateID,"single",i)},mouseover:function(a){return t.mouseoverMatrixRect(i,e,r)},mouseleave:function(a){return t.mouseleaveMatrixRect(i)}}})}),t._v(" "),t._l(i,function(t){return a("rect",{key:"winDis"+t.id,staticClass:"winDis",class:{neg:t.isNeg},attrs:{x:t.x+t.width/2-t.widthDis/2,y:t.y+t.width/2-t.widthDis/2,width:t.widthDis,height:t.widthDis}})})],2)}),t._v(" "),t._l(t.matrix.rects,function(i,e){return a("g",{key:"front"+e,staticClass:"row"},[a("g",{staticClass:"front"},t._l(i,function(t,i){return a("rect",{key:"front"+i,class:{selected:t.selected},attrs:{x:t.x,y:t.y,width:t.width,height:t.height}})}),0)])}),t._v(" "),t._l(t.label.cover,function(i,e){return a("g",{key:"cover"+e,staticClass:"cover"},[!0===i.isShow?a("rect",{attrs:{x:i.x1,y:i.y1,width:i.width,height:i.height,fill:"white"}}):t._e(),t._v(" "),!0===i.isShow?a("rect",{attrs:{x:i.x1,y:i.y1,width:i.width,height:i.height,fill:i.isZero?"white":i.isNeg?""+t.reduceColor:""+t.advanceColor,opacity:Math.abs(i.value)},on:{click:function(i){return t.setCoverState(e)}}}):t._e()])}),t._v(" "),t.tooltip.matrix.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix",transform:"translate("+t.tooltip.matrix.x+", "+t.tooltip.matrix.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height/2-8}},[t._v("\n              Diff: "+t._s(t.tooltip.matrix.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixBottom.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom",transform:"translate("+t.tooltip.matrixBottom.x+", "+t.tooltip.matrixBottom.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:8+t.tooltip.height/2}},[t._v("\n              Diff: "+t._s(t.tooltip.matrixBottom.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixRight.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-right",transform:"translate("+t.tooltip.matrixRight.x+", "+t.tooltip.matrixRight.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:"8",y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:0}},[t._v("\n              Diff: "+t._s(t.tooltip.matrixRight.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M 10 -5 L 10 5 L 0 0 z"}})]):t._e()],2)]):t._e()])])])},staticRenderFns:[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view-header",staticStyle:{position:"relative"}},[a("div",{staticClass:"view-title"},[t._v("Adjustment View")]),t._v(" "),a("div",{staticClass:"lengnd"},[a("div",{attrs:{id:"lengnd2"}},[a("div",{staticStyle:{width:"80px",height:"10px"}}),t._v(" "),a("div",{staticClass:"lengnd2-glyph-wrap",staticStyle:{width:"80px",height:"20px"}},[a("div",{staticClass:"lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"lengnd2-glyph"})]),t._v(" "),a("div",{staticStyle:{height:"20px"}},[a("span",[t._v("Adjustment impact")])])]),t._v(" "),a("div",{attrs:{id:"lengnd1"}},[a("div",{staticClass:"lengnd1-arrow-wrap",staticStyle:{width:"120px",height:"10px"}},[a("span",[t._v("-")]),t._v(" "),a("div",{staticStyle:{width:"5px",height:"1px","background-color":"white"}}),t._v(" "),a("div",{staticClass:"triangle-left"}),t._v(" "),a("div",{staticStyle:{width:"35px",height:"1px","background-color":"black"}}),t._v(" "),a("div",{staticStyle:{width:"5px",height:"1px","background-color":"white"}}),t._v(" "),a("span",[t._v("0")]),t._v(" "),a("div",{staticStyle:{width:"5px",height:"1px","background-color":"white"}}),t._v(" "),a("div",{staticStyle:{width:"35px",height:"1px","background-color":"black"}}),t._v(" "),a("div",{staticClass:"triangle-right"}),t._v(" "),a("div",{staticStyle:{width:"5px",height:"1px","background-color":"white"}}),t._v(" "),a("span",[t._v("+")])]),t._v(" "),a("div",{staticClass:"lengnd1-glyph-wrap",staticStyle:{width:"120px",height:"20px"}},[a("div",{staticClass:"lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"lengnd1-glyph"})]),t._v(" "),a("div",{staticStyle:{height:"20px"}},[a("span",[t._v("Group adjustment impact")])])])])])}]};var c=function(t){a("1TIg")},d=a("VU/8")(n.a,h,!1,c,null,null).exports,u=a("vwbq"),p=a("zi0F"),x={name:"MatrixOverview",props:["StateID_index","Index_StateID","transMatrix","dim","allMarkovStateOri","allMarkovStateShift","allMarkovStateShiftAccum","start","strokeFrom"],data:function(){return{player:0,btn1:!0,btn2:!1,barMaxValue:0,allMarkovStateShiftAccumReal:[],winRateOri:{accum:[],add:[]},winRateShiftDis:{accum:[],add:[]},strokeWidthScale:null,winDisBarRects:null,winRateShift:{accum:[],add:[]},winRateShiftDisPienow:{add:[]},textWindow:{ori:null,shiftDis:null},height:null,draw:{padding:4,paddingLeft:20,paddingInner:60,numRectHeight:25,numRectWidth:50,stateRects:[],accumWinRate:[],addWinRate:[]},tooltip:{textPadding:10,triangle:{width:16,height:10,heightOverlap:2},add:{width:180,height:60,splitLineWidth:100,pieRadius:25,ori:null,dif:null,pieAccum:null,pieNow:null,isNeg:!1,x:null,y:null,show:!1},accum:{width:120,height:60,ori:null,dif:null,isNeg:!1,x:null,y:null,show:!1}}}},watch:{allMarkovStateShift:function(){this.allMarkovStateShift.length>0?(this.calcWinRateOri(this.start),this.calcAllMarkovStateShiftAccumReal(this.start),this.calcWinRateShiftDis(this.start),this.calcWinDisBarRects(this.start),this.drawOverviewRect(this.start),this.drawAccumWinRate(),this.drawAddWinRate()):(this.resetWinRateShiftDis(),this.drawOverviewRect(this.start),this.drawAccumWinRate(),this.drawAddWinRate())},strokeFrom:function(){var t=this;this.draw.stateRects.forEach(function(i,a){i.strokeFrom===t.strokeFrom?i.isSelected=!0:i.isSelected=!1})}},mounted:function(){this.$nextTick(this.onResize())},computed:{width:function(){return(this.rectWidth+this.draw.paddingInner)*this.draw.stateRects.length},rectHeight:function(){return this.height-2*this.paddingTop-this.lineArea},rectWidth:function(){return 1.5*this.rectHeight},lineArea:function(){return.3*this.height},paddingTop:function(){return.08*this.height},barText:function(){return.006*this.rectHeight}},methods:{mouseoverAddStream:function(t){this.textWindow.ori=t.ori,this.textWindow.shiftDis=t.dis;var i=u.g().startAngle(-Math.PI/4).sort(null),a=u.a().innerRadius(0).outerRadius(this.tooltip.add.pieRadius),e=i([Math.abs(t.disNow),Math.abs(t.disAccum)]);this.tooltip.add.x=t.centralX+5,this.tooltip.add.y=t.centralY,this.tooltip.add.ori=t.ori.toFixed(2),this.tooltip.add.dif=t.dis.toFixed(2),this.tooltip.add.pieAccum=a(e[1]),this.tooltip.add.pieNow=a(e[0]),this.tooltip.add.isNeg=t.disNeg,this.tooltip.add.show=!0},mouseleaveAddStream:function(){this.hideText(),this.tooltip.add.show=!1},mouseoverAccumStream:function(t){this.textWindow.ori=t.ori,this.textWindow.shiftDis=t.dis,this.tooltip.accum.x=(t.x1+t.x2)/2,this.tooltip.accum.y=12,this.tooltip.accum.ori=t.ori.toFixed(2),this.tooltip.accum.dif=t.dis.toFixed(2),this.tooltip.accum.show=!0},mouseleaveAccumStream:function(){this.hideText(),this.tooltip.accum.show=!1},hideText:function(){this.textWindow.ori=null,this.textWindow.shiftDis=null},setDetail:function(t){this.$emit("setStroke",t)},onResize:function(){this.height=this.$el.clientHeight-40-40},drawOverviewRect:function(t){var i=this,a=[];i.winDisBarRects.forEach(function(t,i){t.advance.forEach(function(t){a.push(t.value)}),t.reduce.forEach(function(t){a.push(t.value)})});var e=u.k().domain([0,u.d(a)]).range([0,i.rectHeight/2-5]),r=u.j().domain(u.i(3)).range([30,i.rectWidth/2]).paddingOuter(.5).paddingInner(.2);i.draw.stateRects=[];var s=0,o=t+1,l=u.d(a);i.barMaxValue=l,i.winDisBarRects.forEach(function(t,a){var l={advance:[],reduce:[]};t.advance.forEach(function(t,i){var a=e(t.value),s=t.label.split("_");s[0]="loop"===s[0]?"topsp":s[0];var o=s.join(" ");l.advance.push({x:20+r(i),y:-a,width:r.bandwidth(),height:a,label:o})}),t.reduce.forEach(function(t,a){var s=e(t.value),o=t.label.split("_");o[0]="loop"===o[0]?"topsp":o[0];var n=o.join(" ");l.reduce.push({x:i.rectWidth/2+r(a),y:0,width:r.bandwidth(),height:s,label:n})}),i.draw.stateRects.push({strokeFrom:o,x:s,x2:s+i.rectWidth,text:o+"-"+(o+2),isSelected:o===i.strokeFrom,winBars:l}),s+=i.rectWidth+i.draw.paddingInner,o+=2})},drawAccumWinRate:function(){var t=this;if(0!==t.winRateShiftDis.accum.length){var i=t.strokeWidthScale;t.draw.accumWinRate=[];for(var a=t.rectWidth/2+t.lineArea,e=0;e<t.winRateShiftDis.accum.length;e++){var r=t.winRateOri.accum[e],s=t.winRateShiftDis.accum[e],o=0===s?null:s<0;if(0===e)t.draw.accumWinRate.push({ori:100*r,dis:100*s,x1:0,x2:a,width:t.rectWidth,strokeWDis:i(Math.abs(s)),disNeg:o});else{var l=t.rectWidth+t.draw.paddingInner;t.draw.accumWinRate.push({ori:100*r,dis:100*s,x1:a,x2:a+l,width:l,strokeWDis:i(Math.abs(s)),disNeg:o}),a+=l}}}else t.draw.accumWinRate=[]},drawAddWinRate:function(){var t=this;if(0!==t.winRateShiftDis.add.length){var i=t.strokeWidthScale;t.draw.addWinRate=[],t.draw.stateRects.forEach(function(a,e){var r=t.winRateOri.add[e],s=t.winRateShiftDis.add[e],o=t.winRateShiftDisPienow.add[e],l=s<0,n=null!==t.draw.accumWinRate[e].disNeg&&l^t.draw.accumWinRate[e].disNeg,h=t.draw.accumWinRate[e+1].strokeWDis,c=i(Math.abs(s)),d=n&&c>t.draw.accumWinRate[e].strokeWDis,u=void 0;n?d?d&&(u=0):u=h:u=h-c;var p=a.x+t.rectWidth/2+u,x=(t.lineArea-u)*Math.sqrt(2),w=d?c-h:c;t.draw.addWinRate.push({ori:100*r,dis:100*s,disAccum:100*(s-o),disNow:100*o,strokeWDis:c,x:p,y:t.lineArea,width:x,height:c,centralX:p+(t.lineArea-u)/2,centralY:t.lineArea/2,disNeg:l,differentNeg:n,reverseAccumFlag:d,splitStrokeW:w,pathGradient:t.genCurvePath(a.x+t.rectWidth/2+t.lineArea,u+c-w/2)})}),console.log(t.draw.addWinRate)}else t.draw.addWinRate=[]},genCurvePath:function(t,i){var a=t+50,e=i,r=t+50+80,s=i+10,o=u.f();return o.moveTo(t,i),o.lineTo(a,e),o.lineTo(r,s),o.toString()},resetWinRateShiftDis:function(){this.winRateOri.accum=[],this.winRateOri.add=[],this.winRateShiftDis.accum=[],this.winRateShiftDis.add=[],this.winRateShift.accum=[],this.winRateShift.add=[],this.winDisBarRects=[]},calcWinRateOri:function(t){var i=this;if(i.winRateOri.accum=[],i.winRateOri.add=[],t){var a=i.allMarkovStateOri[1];i.winRateOri.accum.push(a.proArray[i.dim-2])}else i.winRateOri.accum.push(0);for(var e=i.winRateOri.accum[0],r=null,s=t+2;s<i.allMarkovStateOri.length;s++)if(s%2===t){var o=i.allMarkovStateOri[s];i.winRateOri.accum.push(o.proArray[i.dim-2]),r=o.proArray[i.dim-2],i.winRateOri.add.push(r-e),e=r}},calcAllMarkovStateShiftAccumReal:function(t){var i=this;i.allMarkovStateShiftAccumReal=[],t&&i.allMarkovStateShiftAccumReal.push(i.allMarkovStateShiftAccum[0]);for(var a=t+1;a<=i.allMarkovStateShiftAccum.length;a+=2){var e=a-1,r=i.allMarkovStateShiftAccum[e];if(i.allMarkovStateShiftAccumReal.push(r),a<i.allMarkovStateShiftAccum.length){var s=r.calcNextMarkovState(i.transMatrix);i.allMarkovStateShiftAccumReal.push(s)}}},calcWinRateShiftDis:function(t){var i=this;i.winRateShiftDis.accum=[],i.winRateShiftDis.add=[],i.winRateShiftDisPienow.add=[],i.winRateShift.accum=[],i.winRateShift.add=[];var a=void 0;if(t){var e=i.allMarkovStateShift[0].calcNextMarkovState(i.transMatrix).proArray[i.dim-2],r=e-i.winRateOri.accum[0];i.winRateShift.accum.push(e),i.winRateShiftDis.accum.push(r),a=e}else i.winRateShift.accum.push(0),i.winRateShiftDis.accum.push(0),a=0;for(var s=null,o=null,l=0,n=t+1;n+1<=i.allMarkovStateShift.length;n+=2){var h=i.allMarkovStateShift[n],c=i.allMarkovStateShiftAccumReal[n],d=h.calcNextMarkovState(i.transMatrix).proArray[i.dim-2];o=c.calcNextMarkovState(i.transMatrix).proArray[i.dim-2];var p=(s=d)-i.winRateOri.accum[l+1];i.winRateShift.accum.push(s),i.winRateShiftDis.accum.push(p);var x=s-a,w=s-o;i.winRateShift.add.push(x),i.winRateShiftDis.add.push(x-i.winRateOri.add[l]),i.winRateShiftDisPienow.add.push(w),a=s,l++}var m=i.winRateShiftDis.accum.map(function(t){return Math.abs(t)}).concat(i.winRateShiftDis.add.map(function(t){return Math.abs(t)}));console.log("winRateDisAll",m),i.strokeWidthScale=u.k().domain([0,u.d(m)]).range([0,20])},calcWinDisBarRects:function(t){for(var i=this,a=[],e=function(){var t=i.calcWinDisBar(r-1),e={advance:[],reduce:[]},l=[],n=[];if(t.colSum.forEach(function(i,a){var e=i.Dis;e>0?l.push({value:Math.abs(e),label:t.getMatrixLabel(a)}):e<0&&n.push({value:Math.abs(e),label:t.getMatrixLabel(a)})}),l.sort(function(t,i){return i.value-t.value}),n.sort(function(t,i){return i.value-t.value}),l.length>=3)e.advance=l.slice(0,3);else{var h=l.length;for(e.advance=l.slice(0,h),s=h;s<3;s++)e.advance[s]={value:0,label:""}}if(n.length>=3)e.reduce=n.slice(0,3);else{var c=n.length;for(e.reduce=n.slice(0,c),o=c;o<3;o++)e.reduce[o]={value:0,label:""}}a.push(e)},r=t+1;r+2<=i.allMarkovStateShift.length;r+=2){var s,o;e()}i.winDisBarRects=a},calcWinDisBar:function(t){var i=this,a=i.allMarkovStateOri[t+1],e=i.allMarkovStateShift[t+1],r=i.allMarkovStateShiftAccum[t].calcNextMarkovState(i.transMatrix),s=a.calcNextWinState(i.transMatrix)[0],o=e.calcNextWinState(i.transMatrix)[0],l=r.calcNextWinState(i.transMatrix)[0];return new p.e(s,o,l,1,i.StateID_index)}}},w={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"matrixoverview-view"}},[t._m(0),t._v(" "),a("div",{staticClass:"svg-container"},[a("svg",{attrs:{width:t.width,height:t.height}},[a("defs",[a("linearGradient",{attrs:{id:"gradient-advance"}},[a("stop",{staticClass:"stop-advance",attrs:{offset:"0%"}}),t._v(" "),a("stop",{staticClass:"stop-reduce",attrs:{offset:"30%"}}),t._v(" "),a("stop",{staticClass:"stop-none",attrs:{offset:"100%"}})],1),t._v(" "),a("linearGradient",{attrs:{id:"gradient-reduce"}},[a("stop",{staticClass:"stop-reduce",attrs:{offset:"0%"}}),t._v(" "),a("stop",{staticClass:"stop-advance",attrs:{offset:"30%"}}),t._v(" "),a("stop",{staticClass:"stop-none",attrs:{offset:"100%"}})],1)],1),t._v(" "),a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},[a("g",{attrs:{id:"winRateAccum",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},t._l(t.draw.accumWinRate,function(i,e){return a("g",{key:"accum"+e,on:{mouseover:function(a){return t.mouseoverAccumStream(i)},mouseleave:t.mouseleaveAccumStream}},[a("rect",{staticClass:"dis",class:{neg:i.disNeg},attrs:{x:i.x1,y:"0",width:i.width,height:i.strokeWDis}})])}),0),t._v(" "),a("g",{attrs:{id:"winRateAdd",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},t._l(t.draw.addWinRate,function(i,e){return a("g",{key:"add"+e,on:{mouseover:function(a){return t.mouseoverAddStream(i)},mouseleave:t.mouseleaveAddStream}},[a("rect",{staticClass:"dis",class:{neg:i.disNeg},attrs:{transform:"translate("+i.x+", "+i.y+") rotate(-45)",x:"0",y:"0",width:i.width,height:i.height}}),t._v(" "),i.differentNeg?a("path",{staticClass:"dis-gradient",class:{neg:i.disNeg},attrs:{"stroke-width":i.splitStrokeW,d:i.pathGradient}}):t._e()])}),0),t._v(" "),a("g",{attrs:{id:"stateRects",transform:"translate("+t.draw.paddingLeft+", "+(t.lineArea+t.paddingTop)+")"}},t._l(t.draw.stateRects,function(i,e){return a("g",{key:"stateRect"+e,attrs:{transform:"translate("+i.x+", 0)"}},[a("rect",{staticClass:"num-rect",attrs:{x:0,y:-t.draw.numRectHeight,width:t.draw.numRectWidth,height:t.draw.numRectHeight}}),t._v(" "),a("text",{staticClass:"num",attrs:{x:t.draw.numRectWidth/2,y:-t.draw.numRectHeight/2}},[t._v("\n              "+t._s(i.text)+"\n            ")]),t._v(" "),a("rect",{class:{selected:i.isSelected},attrs:{x:0,y:0,width:t.rectWidth,height:t.rectHeight},on:{click:function(a){return t.setDetail(i.strokeFrom)}}}),t._v(" "),a("g",{staticClass:"winbar",attrs:{transform:"translate(0, "+t.rectHeight/2+")"}},[a("line",{staticClass:"zero-line",attrs:{x1:42,y1:0,x2:t.rectWidth,y2:0}}),t._v(" "),a("line",{staticClass:"zero-line",attrs:{x1:42,y1:t.rectHeight/2-5,x2:45,y2:t.rectHeight/2-5}}),t._v(" "),a("line",{staticClass:"zero-line",attrs:{x1:45,y1:t.rectHeight/2-5,x2:45,y2:-t.rectHeight/2+5}}),t._v(" "),a("line",{staticClass:"zero-line",attrs:{x1:42,y1:-t.rectHeight/2+5,x2:45,y2:-t.rectHeight/2+5}}),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"30",y:"0"}},[t._v("0")]),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"2",y:t.rectHeight/2-6}},[t._v(t._s("-"+(100*t.barMaxValue).toFixed(2)+"%"))]),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"6",y:-t.rectHeight/2+8}},[t._v(t._s((100*t.barMaxValue).toFixed(2)+"%"))]),t._v(" "),t._l(i.winBars.advance,function(i,e){return a("g",{key:"advance"+e,staticClass:"advance"},[a("rect",{attrs:{x:i.x,y:i.y,width:i.width,height:i.height}}),t._v(" "),a("text",{style:"font-size: "+t.barText+"rem",attrs:{transform:"translate("+(i.x+i.width/2)+", 5) rotate(70)",x:"0",y:"0"}},[t._v("\n                  "+t._s(i.label)+"\n                ")])])}),t._v(" "),t._l(i.winBars.reduce,function(i,e){return a("g",{key:"reduce"+e,staticClass:"reduce"},[a("rect",{attrs:{x:i.x,y:i.y,width:i.width,height:i.height}}),t._v(" "),a("text",{style:"font-size: "+t.barText+"rem",attrs:{transform:"translate("+(i.x+i.width/2)+", -5) rotate(70)",x:"0",y:"0"}},[t._v("\n                  "+t._s(i.label)+"\n                ")])])})],2)])}),0),t._v(" "),a("g",{attrs:{id:"tooltip-add",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},[t.tooltip.add.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-add-right",transform:"translate("+t.tooltip.add.x+", "+t.tooltip.add.y+")"}},[a("g",{staticClass:"content",attrs:{transform:"translate("+(t.tooltip.triangle.height-t.tooltip.triangle.heightOverlap)+", 0)"}},[a("rect",{attrs:{rx:"5",ry:"5",x:0,y:-t.tooltip.add.height/2,width:t.tooltip.add.width,height:t.tooltip.add.height}}),t._v(" "),a("text",{attrs:{x:""+t.tooltip.textPadding,y:-t.tooltip.add.height/4}},[t._v("\n                Diff: "+t._s(t.tooltip.add.dif)+"%\n              ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M "+t.tooltip.textPadding+" 0 l "+t.tooltip.add.splitLineWidth+" 0 l "+t.tooltip.add.height/2+" "+t.tooltip.add.height/2}}),t._v(" "),a("text",{attrs:{x:""+t.tooltip.textPadding,y:t.tooltip.add.height/4}},[t._v("\n                Ori: "+t._s(t.tooltip.add.ori)+"%\n              ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate("+(t.tooltip.textPadding+t.tooltip.add.splitLineWidth+t.tooltip.add.height/2+10)+", 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.add.isNeg},attrs:{cx:"0",cy:"0",r:""+t.tooltip.add.pieRadius}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.add.pieNow}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.add.pieAccum}})])]),t._v(" "),a("g",{staticClass:"triangle"},[a("path",{attrs:{d:"M "+t.tooltip.triangle.height+" "+-t.tooltip.triangle.width/2+" L "+t.tooltip.triangle.height+" "+t.tooltip.triangle.width/2+" L 0 0 z"}})])]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-accum",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},[t.tooltip.accum.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-accum-bottom",transform:"translate("+t.tooltip.accum.x+", "+t.tooltip.accum.y+")"}},[a("g",{staticClass:"content",attrs:{transform:"translate(0, "+(t.tooltip.triangle.height-t.tooltip.triangle.heightOverlap)+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.accum.width/2,y:0,width:t.tooltip.accum.width,height:t.tooltip.accum.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.accum.width/2+t.tooltip.textPadding,y:""+(t.tooltip.accum.height/4+3)}},[t._v("\n                Diff: "+t._s(t.tooltip.accum.dif)+"%\n              ")]),t._v(" "),a("text",{attrs:{x:-t.tooltip.accum.width/2+t.tooltip.textPadding,y:""+(3*t.tooltip.accum.height/4-3)}},[t._v("\n                Ori: "+t._s(t.tooltip.accum.ori)+"%\n              ")])]),t._v(" "),a("g",{staticClass:"triangle"},[a("path",{attrs:{d:"M "+t.tooltip.triangle.width/2+" "+t.tooltip.triangle.height+" L "+-t.tooltip.triangle.width/2+" "+t.tooltip.triangle.height+" L 0 0 z"}})])]):t._e()])])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"view-header"},[i("div",{staticClass:"view-title"},[this._v("Accumulation View")])])}]};var m=a("VU/8")(x,w,!1,function(t){a("cAiI")},null,null).exports,g=a("D4uH"),_=(a("5O9v"),a("UuEb")),v={name:"MatrixDetail",components:{Icon:g.a},props:["transMatrix","allMarkovStateOri","StateID_index","Index_StateID","strokeFrom","allMarkovStateShift","allMarkovStateShiftAccum","shift","K","B"],data:function(){return{player0:_.player0,player1:_.player1,textWindow:{Ori:null,Dis:null},stateMatrixArray:new Array(2),winStateArray:new Array(2),barMaxValue:"",barMaxHeight:0,MatrixAdjust:0,draw:{width:0,height:0,padding:38,slotWidth:65,slotBackPadding:2,strokeNumTextPadding:5,childLabelWidth:30,barAreaWidth:30,barAreaBaseGap:2,gap:5,matrixPadding:0},label:{labelChild:["L/F","L/M","L/B","L/F","L/M","L/B","L/F","L/M","L/B","S/F","S/M","S/B","H/F","H/M","H/B","L/F","L/M","L/B"],labelParent:["loop","flick","chop","drop","block"],labelChildServe:["S/F","S/M","S/B","H/F","H/M","H/B","L/F","L/M","L/B"],labelParentServe:["serve"]},bar:{scaleX:null,rowBars1:null,rowBar1BaseY:null,colBars1:null,colBars2:null,winBars1:null,winBars2:null,colBar1BaseY:null,colBar2BaseY:null},matrix:{circles1:null,circles2:null,winRects2:null},line:{rowLineMatrix1:null,rowLineMatrix1small:null,colLineMatrix1:null,colLineMatrix1small:null,rowLineMatrix2:null,rowLineMatrix2small:null,colLineMatrix2:null,colLineMatrix2small:null},winMode:{name:"win",choose:!1,path:this.drawModeSelect(10)},proMode:{name:"pro",choose:!0,path:this.drawModeSelect(10)},nowMode:"pro",tooltip:{width:180,height:60,splitLine:100,ori:null,dif:null,pieAccum:null,pieNow:null,isNeg:!1,matrixBottom1:{x:null,y:null,show:!1},matrixTop1:{x:null,y:null,show:!1},matrixBottom2:{x:null,y:null,show:!1},matrixTop2:{x:null,y:null,show:!1},barProRight0:{x:null,y:null,show:!1},barWinLeft1:{x:null,y:null,show:!1},barProRight1:{x:null,y:null,show:!1},barWinLeft2:{x:null,y:null,show:!1},barProLeft2:{x:null,y:null,show:!1}}}},mounted:function(){this.$nextTick(this.onResize())},computed:{MatrixAreaWidth:function(){return parseInt((this.draw.width-5*(this.draw.barAreaWidth+this.draw.barAreaBaseGap)-2*this.draw.padding)/2)},MatrixAreaHeight:function(){return this.draw.height-this.draw.padding},rectWidth:function(){var t=Math.min(this.MatrixAreaWidth,this.MatrixAreaHeight);return parseInt((t/Math.sqrt(2)-this.draw.slotWidth-4*this.draw.gap)/18)},MatrixWidth:function(){return 18*this.rectWidth+4*this.draw.gap},transformYforCentral:function(){return(this.draw.height-2*this.draw.padding-(this.MatrixWidth+this.draw.slotWidth)*Math.sqrt(2))/2},barWidth:function(){return this.rectWidth/Math.sqrt(2)-2},transformXserve:function(){return 1===this.strokeFrom?9*(this.rectWidth+this.draw.matrixPadding):this.MatrixWidth},matrixRects1:function(){return 1===this.strokeFrom?this.calcMatrixRectsReverse(9,18,1):this.calcMatrixRectsReverse(18,18,1)},matrixRects2:function(){return this.calcMatrixRectsReverse(18,18,2)},matrixLabelChildRow1:function(){return this.calcMatrixLabelChildRow(this.matrixRects1,this.strokeFrom,1)},matrixLabelChildRow2:function(){return this.calcMatrixLabelChildRow(this.matrixRects2,this.strokeFrom,2)},matrixLabelParentRow1:function(){return this.calcMatrixLabelParentRow(this.matrixRects1,this.strokeFrom,1)},matrixLabelParentRow2:function(){return this.calcMatrixLabelParentRow(this.matrixRects2,this.strokeFrom,2)},matrixLabelChildCol1:function(){return this.calcMatrixLabelChildColReverse(this.matrixRects1)},matrixLabelChildCol2:function(){return this.calcMatrixLabelChildColReverse(this.matrixRects2)},matrixLabelParentCol1:function(){return this.calcMatrixLabelParentColReverse(this.matrixRects1)},matrixLabelParentCol2:function(){return this.calcMatrixLabelParentColReverse(this.matrixRects2)},matrixSymbol1:function(){return this.calcMatrixSymbol(this.matrixRects1)},matrixSymbol2:function(){return this.calcMatrixSymbol(this.matrixRects2)}},watch:{strokeFrom:function(){console.log("new StrokeFrom: "+this.strokeFrom),this.allMarkovStateShift.length>0&&(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail())},allMarkovStateOri:function(){this.allMarkovStateShift.length>0&&(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail())},allMarkovStateShift:function(){this.allMarkovStateShift.length>0?(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail()):this.resetMatrixDetail()}},methods:{onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight},resetMatrixDetail:function(){this.bar={scaleX:null,rowBars1:null,colBars1:null,colBars2:null,winBars1:null,winBars2:null},this.matrix={circles1:null,circles2:null},this.line={rowLineMatrix1:null,rowLineMatrix1small:null,colLineMatrix1:null,colLineMatrix1small:null,rowLineMatrix2:null,rowLineMatrix2small:null,colLineMatrix2:null,colLineMatrix2small:null}},drawMatrixDetail:function(){var t=this,i=t.stateMatrixArray[0].rowSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0}),a=t.stateMatrixArray[0].colSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0}),e=t.stateMatrixArray[1].colSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0});t.bar.scaleX=u.k().domain([0,u.d(i.concat(a).concat(e))]).range([2,t.draw.barAreaWidth]);var r=u.d(i.concat(a).concat(e));0!==r&&(t.barMaxValue=(100*r).toFixed(2)+"%"),t.barMaxHeight=t.bar.scaleX(r),t.bar.rowBars1=t.calcBarsReverse(t.stateMatrixArray[0].rowSum.slice().reverse(),t.bar.scaleX),t.bar.rowBar1BaseY=t.bar.rowBars1[t.bar.rowBars1.length-1].y+t.barWidth,t.bar.colBars1=t.calcBarsReverse(t.stateMatrixArray[0].colSum.slice().reverse(),t.bar.scaleX),t.bar.colBars2=t.calcBarsReverse(t.stateMatrixArray[1].colSum.slice().reverse(),t.bar.scaleX),t.bar.winBars1=t.calcBarsReverse(t.winStateArray[0].colSum.slice().reverse(),t.bar.scaleX),t.bar.winBars2=t.calcBarsReverse(t.winStateArray[1].colSum.slice().reverse(),t.bar.scaleX),t.bar.colBar1BaseY=t.bar.colBars1[t.bar.colBars1.length-1].y+t.barWidth,t.bar.colBar2BaseY=t.bar.colBars1[t.bar.colBars1.length-1].y+t.barWidth,t.line.rowLineMatrix1=t.calcMatrixRowLine(t.bar.rowBars1,t.matrixRects1),t.line.colLineMatrix1=t.calcMatrixColLine(t.bar.winBars1,t.matrixRects1),t.line.rowLineMatrix2=t.calcMatrixRowLine(t.bar.colBars1,t.matrixRects2),t.line.colLineMatrix2=t.calcMatrixColLine(t.bar.winBars2,t.matrixRects2),t.line.rowLineMatrix1small=t.calcMatrixRowLineSmall(t.matrixRects1),t.line.colLineMatrix1small=t.calcMatrixColLineSmall(t.matrixRects1),t.line.rowLineMatrix2small=t.calcMatrixRowLineSmall(t.matrixRects2),t.line.colLineMatrix2small=t.calcMatrixColLineSmall(t.matrixRects2);var s=[],o=[];t.stateMatrixArray[0].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){s.push(t.Ori),s.push(t.Shift),o.push(t.Shift?Math.abs(t.Shift-t.Ori):0)})}),t.stateMatrixArray[1].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){s.push(t.Ori),s.push(t.Shift),o.push(t.Shift?Math.abs(t.Shift-t.Ori):0)})});var l=u.l().domain([0,u.d(s)]).range([0,t.rectWidth/2-1-2]),n=u.l().domain([u.e(o),u.d(o)]).range([2,t.rectWidth/2-1-2]);t.matrix.circles1=t.calcMatrixCircleReverse(t.matrixRects1,t.stateMatrixArray[0].stateMatrix,l,n),t.matrix.circles2=t.calcMatrixCircleReverse(t.matrixRects2,t.stateMatrixArray[1].stateMatrix,l,n);var h=[];t.winStateArray[1].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){t.Shift&&h.push(Math.abs(t.Shift-t.Ori))})});var c=u.l().domain([u.e(h),u.d(h)]).range([2,t.rectWidth-4]);t.matrix.winRects2=t.calcMatrixWinRectReverse(t.matrixRects2,t.winStateArray[1].stateMatrix,c)},calcMatrixRects:function(t,i){for(var a=this,e=[],r=[],s=[],o=0,l=0,n=0;n<t;n++)3!==n&&6!==n&&9!==n&&15!==n||1===a.strokeFrom||(o+=a.draw.gap),r.push(o),o+=a.rectWidth+a.draw.matrixPadding;for(var h=0;h<i;h++)3!==h&&6!==h&&9!==h&&15!==h||(l+=a.draw.gap),s.push(l),l+=a.rectWidth;for(var c=0;c<t;c++){for(var d=[],u=0;u<i;u++)d.push({id:c*t+u,x:r[c],y:s[u],isHighlight:!1});e.push(d)}return{row:r,col:s,rects:e}},calcMatrixRectsReverse:function(t,i,a){for(var e=this,r=[],s=[],o=[],l=0,n=0,h=0;h<t;h++)3!==h&&6!==h&&9!==h&&15!==h||1===e.strokeFrom&&1===a||(l+=e.draw.gap),s.push(l),l+=e.rectWidth+e.draw.matrixPadding;for(var c=0;c<i;c++)3!==c&&9!==c&&12!==c&&15!==c||(n+=e.draw.gap),o.push(n),n+=e.rectWidth;for(var d=0;d<t;d++){for(var u=[],p=0;p<i;p++)u.push({id:d*t+p,x:s[d],y:o[p],isHighlight:!1});r.push(u)}return{row:s,col:o,rects:r}},calcMatrixCircle:function(t,i,a,e){var r=this,s=[],o=u.g().startAngle(-Math.PI/4).sort(null),l=u.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,n){var h=[];i.forEach(function(i,s){var c=t.rects[n][s],d=o([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);h.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:l(d[1]),arcDisNow:l(d[0]),id:c.id,rOri:0===i.Ori?0:a(i.Ori),rShift:0===i.Shift?0:a(i.Shift),rDis:0===i.Dis?0:e(Math.abs(i.Dis)),cx:c.x+r.rectWidth/2,cy:c.y+r.rectWidth/2,isNeg:i.Dis<0,isHighlight:!1})}),s.push(h)}),s},calcMatrixCircleReverse:function(t,i,a,e){var r=this,s=[],o=u.g().startAngle(-Math.PI/4).sort(null),l=u.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,n){var h=[];i.slice().reverse().forEach(function(i,s){var c=t.rects[n][s],d=o([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);h.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:l(d[1]),arcDisNow:l(d[0]),id:c.id,rOri:0===i.Ori?0:a(i.Ori),rShift:0===i.Shift?0:a(i.Shift),rDis:0===i.Dis?0:e(Math.abs(i.Dis)),cx:c.x+r.rectWidth/2,cy:c.y+r.rectWidth/2,isNeg:i.Dis<0,isHighlight:!1})}),s.push(h)}),s},calcMatrixWinRectReverse:function(t,i,a){var e=[],r=u.g().startAngle(-Math.PI/4).sort(null),s=u.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,o){var l=[];i.slice().reverse().forEach(function(i,e){var n=t.rects[o][e],h=r([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);l.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:s(h[1]),arcDisNow:s(h[0]),id:n.id,widthDis:0===i.Dis?0:a(Math.abs(i.Dis)),x:t.row[o],y:t.col[e],isNeg:i.Dis<0})}),e.push(l)}),e},calcBars:function(t,i){var a=this,e=[],r=1,s=u.g().startAngle(-Math.PI/4).sort(null),o=u.a().innerRadius(0).outerRadius(25);return t.forEach(function(t,l){3!==l&&6!==l&&9!==l&&15!==l||(r+=a.draw.gap/Math.sqrt(2));var n=s([Math.abs(t.DisNow),Math.abs(t.DisAccum)]);e.push({id:l,proOri:t.Ori,proDis:t.Dis,proDisAccum:t.DisAccum,proDisNow:t.DisNow,arcDisAccum:o(n[1]),arcDisNow:o(n[0]),widthOri:i(t.Ori),widthDis:i(Math.abs(t.Dis)),isNeg:t.Dis<0,y:r,isHighlight:!1}),r+=2+a.barWidth}),e},calcBarsReverse:function(t,i){var a=this,e=[],r=1,s=u.g().startAngle(-Math.PI/4).sort(null),o=u.a().innerRadius(0).outerRadius(25);return t.forEach(function(l,n){(3===n||9===n||12===n||15===n)&&t.length>9&&(r+=a.draw.gap/Math.sqrt(2));var h=s([Math.abs(l.DisNow),Math.abs(l.DisAccum)]);e.push({id:n,proOri:l.Ori,proDis:l.Dis,proDisAccum:l.DisAccum,arcDisAccum:o(h[1]),proDisNow:l.DisNow,arcDisNow:o(h[0]),widthOri:i(l.Ori),widthDis:i(Math.abs(l.Dis)),isNeg:l.Dis<0,y:r,isHighlight:!1}),r+=2+a.barWidth}),e},calcMatrixRowLine:function(t,i){var a=this,e=[],r=i.row.length;return r>9?t.forEach(function(t,s){e.push({x1:t.widthDis+3,x2:(i.row[r-1-s]+a.rectWidth/2)/Math.sqrt(2)+a.draw.barAreaWidth+a.draw.barAreaBaseGap+9,y:t.y+a.barWidth/2,isHighlight:!1})}):t.forEach(function(t,s){e.push({x1:t.widthDis+3,x2:(i.row[r-1-s]+a.rectWidth/2+a.MatrixWidth-a.transformXserve)/Math.sqrt(2)+a.draw.barAreaWidth+a.draw.barAreaBaseGap,y:t.y+a.barWidth/2,isHighlight:!1})}),e},calcMatrixRowLineSmall:function(t){var i=this,a=[];return t.row.forEach(function(t,e){a.push({x:t+i.rectWidth/2,y1:0,y2:i.draw.slotWidth,isHighlight:!1})}),a},calcMatrixColLine:function(t,i){var a=this,e=[];return t.forEach(function(t,r){e.push({x1:-(t.widthDis+3),x2:-((a.MatrixWidth-i.col[r]-a.rectWidth/2)/Math.sqrt(2)+a.draw.barAreaWidth+a.draw.barAreaBaseGap+9),y:t.y+a.barWidth/2,isHighlight:!1})}),e},calcMatrixColLineSmall:function(t){var i=this,a=[];return t.col.forEach(function(t,e){a.push({y:t+i.rectWidth/2,x1:0,x2:i.draw.slotWidth,isHighlight:!1})}),a},calcMatrixLabelChildRow:function(t,i,a){var e=this,r=void 0;r=1===a&&1===i?e.label.labelChildServe:e.label.labelChild;var s=[];return t.row.forEach(function(t,i){s.push({x:t+1,width:e.rectWidth-2,height:e.draw.childLabelWidth,text:r[i],isHighlight:!1})}),s},calcMatrixLabelChildColReverse:function(t){var i=this,a=[];return t.col.forEach(function(t,e){a.push({y:t+1,width:i.draw.childLabelWidth,height:i.rectWidth-2,text:i.label.labelChild[17-e],isHighlight:!1})}),a},calcMatrixLabelParentRow:function(t,i,a){var e=this,r=[];return 1===a&&1===i?r.push({x:t.row[0],width:9*e.rectWidth+8*e.draw.matrixPadding,text:"serve",isHighlight:!1}):(r.push({x:t.row[0],width:3*e.rectWidth+2*e.draw.matrixPadding,text:"topspin",isHighlight:!1}),r.push({x:t.row[3],width:3*e.rectWidth+2*e.draw.matrixPadding,text:"flick",isHighlight:!1}),r.push({x:t.row[6],width:3*e.rectWidth+2*e.draw.matrixPadding,text:"chop",isHighlight:!1}),r.push({x:t.row[9],width:6*e.rectWidth+5*e.draw.matrixPadding,text:"drop",isHighlight:!1}),r.push({x:t.row[15],width:3*e.rectWidth+2*e.draw.matrixPadding,text:"block",isHighlight:!1})),r},calcMatrixLabelParentColReverse:function(t){var i=this,a=[];return a.push({y:t.col[0],height:3*i.rectWidth,text:"block",isHighlight:!1}),a.push({y:t.col[3],height:6*i.rectWidth,text:"drop",isHighlight:!1}),a.push({y:t.col[9],height:3*i.rectWidth,text:"chop",isHighlight:!1}),a.push({y:t.col[12],height:3*i.rectWidth,text:"flick",isHighlight:!1}),a.push({y:t.col[15],height:3*i.rectWidth,text:"topspin",isHighlight:!1}),a},calcMatrixSymbol:function(t){var i=this,a=[];return t.row.forEach(function(e,r){var s=void 0;s=r===t.row.length-1?"":"+",a.push({x:e+i.rectWidth+i.draw.matrixPadding/2,y:i.MatrixWidth/2,text:s})}),a},drawModeSelect:function(t){var i=u.f();return i.moveTo(0,0),i.lineTo(-t/2,t),i.lineTo(t/2,t),i.closePath(),i.toString()},setMode:function(t){"win"===t?(this.winMode.choose=!0,this.proMode.choose=!1,this.nowMode="win"):(this.winMode.choose=!1,this.proMode.choose=!0,this.nowMode="pro")},mouseoverRowBars1:function(t,i,a,e){var r=this.bar.rowBars1.length;this.showPro(a,e),this.showTooltipProbar0(t,a,e),this.highlightRow1(r-1-i)},mouseleaveRowBars1:function(){this.hidePro(),this.hideTooltipProbar0(),this.recoverAll()},mouseoverWinBars1:function(t,i,a,e){this.showPro(a,e),this.showTooltipWinbar1(t,a,e),this.highlightCol1Row2(i)},mouseleaveWinBars1:function(){this.hidePro(),this.hideTooltipWinbar1(),this.recoverAll()},mouseoverProBars1:function(t,i,a,e){this.showPro(a,e),this.showTooltipProbar1(t,a,e),this.highlightCol1Row2(i)},mouseleaveProBars1:function(){this.hidePro(),this.hideTooltipProbar1(),this.recoverAll()},mouseoverParentCol1:function(t){this.highlightParentCol1Row2(t)},mouseoverChildCol1:function(t){this.highlightCol1Row2(t)},mouseoverParentRow2:function(t){this.highlightParentCol1Row2(4-t)},mouseoverChildRow2:function(t){this.highlightCol1Row2(17-t)},mouseoverWinBars2:function(t,i,a,e){this.showPro(a,e),this.showTooltipWinbar2(t,a,e),this.highlightCol2(i)},mouseleaveWinBars2:function(){this.hidePro(),this.hideTooltipWinbar2(),this.recoverAll()},mouseoverProBars2:function(t,i,a,e){this.showPro(a,e),this.showTooltipProbar2(t,a,e),this.highlightCol2(i)},mouseleaveProBars2:function(){this.hidePro(),this.hideTooltipProbar2(),this.recoverAll()},mouseoverMatrix1:function(t,i,a){if(this.matrix.circles1){var e=100*this.matrix.circles1[i][a].proOri,r=100*this.matrix.circles1[i][a].proDis;if(0!==r){var s=this.matrix.circles1[i][a].arcDisAccum,o=this.matrix.circles1[i][a].arcDisNow;this.showPro(e,r),this.showTooltipMatrix1(t,e,r,s,o),this.highlightMatrix1(i,a)}}},mouseleaveMatrix1:function(){this.hideTooltipMatrix1(),this.hidePro(),this.recoverAll()},mouseoverMatrix2:function(t,i,a){var e=void 0,r=void 0,s=void 0,o=void 0;if("pro"===this.nowMode){if(!this.matrix.circles2)return;e=100*this.matrix.circles2[i][a].proOri,r=100*this.matrix.circles2[i][a].proDis,s=this.matrix.circles2[i][a].arcDisAccum,o=this.matrix.circles2[i][a].arcDisNow}else{if(!this.matrix.winRects2)return;e=100*this.matrix.winRects2[i][a].proOri,r=100*this.matrix.winRects2[i][a].proDis,s=this.matrix.winRects2[i][a].arcDisAccum,o=this.matrix.winRects2[i][a].arcDisNow}0!==r&&(this.showPro(e,r),this.showTooltipMatrix2(t,e,r,s,o),this.highlightMatrix2(i,a))},mouseleaveMatrix2:function(){this.hideTooltipMatrix2(),this.hidePro(),this.recoverAll()},showPro:function(t,i){this.textWindow.Ori=t,this.textWindow.Dis=i},hidePro:function(){this.textWindow.Ori=null,this.textWindow.Dis=null},showTooltipMatrix1:function(t,i,a,e,r){var s=this;s.tooltip.ori=i.toFixed(2),s.tooltip.dif=a.toFixed(2),s.tooltip.isNeg=a<0,s.tooltip.pieAccum=e,s.tooltip.pieNow=r;var o=Math.sqrt(Math.pow(t.y+s.rectWidth/2,2)+Math.pow(s.transformXserve-t.x-s.rectWidth/2,2));t.y<8*s.rectWidth||s.transformXserve-t.x<8*s.rectWidth?(s.tooltip.matrixBottom1.x=t.x+s.rectWidth/2,s.tooltip.matrixBottom1.y=t.y+s.rectWidth/2,s.tooltip.matrixBottom1.show=!0):o>s.transformXserve-20?(s.tooltip.matrixTop1.x=t.x+s.rectWidth/2,s.tooltip.matrixTop1.y=t.y+s.rectWidth/2,s.tooltip.matrixTop1.show=!0):(s.tooltip.matrixBottom1.x=t.x+s.rectWidth/2,s.tooltip.matrixBottom1.y=t.y+s.rectWidth/2,s.tooltip.matrixBottom1.show=!0)},hideTooltipMatrix1:function(){this.tooltip.matrixTop1.show=!1,this.tooltip.matrixBottom1.show=!1},showTooltipMatrix2:function(t,i,a,e,r){var s=this;s.tooltip.ori=i.toFixed(2),s.tooltip.dif=a.toFixed(2),s.tooltip.isNeg=a<0,s.tooltip.pieAccum=e,s.tooltip.pieNow=r;var o=Math.sqrt(Math.pow(t.y+s.rectWidth/2,2)+Math.pow(s.MatrixWidth-t.x-s.rectWidth/2,2));t.y<4*s.rectWidth||s.MatrixWidth-t.x<4*s.rectWidth?(s.tooltip.matrixBottom2.x=t.x+s.rectWidth/2,s.tooltip.matrixBottom2.y=t.y+s.rectWidth/2,s.tooltip.matrixBottom2.show=!0):o>s.MatrixWidth-20?(s.tooltip.matrixTop2.x=t.x+s.rectWidth/2,s.tooltip.matrixTop2.y=t.y+s.rectWidth/2,s.tooltip.matrixTop2.show=!0):(s.tooltip.matrixBottom2.x=t.x+s.rectWidth/2,s.tooltip.matrixBottom2.y=t.y+s.rectWidth/2,s.tooltip.matrixBottom2.show=!0)},hideTooltipMatrix2:function(){this.tooltip.matrixTop2.show=!1,this.tooltip.matrixBottom2.show=!1},showTooltipProbar0:function(t,i,a){var e=this;t.x=0,e.tooltip.ori=i.toFixed(2),e.tooltip.dif=a.toFixed(2),e.tooltip.isNeg=a<0,e.tooltip.pieAccum=t.arcDisAccum,e.tooltip.pieNow=t.arcDisNow,e.tooltip.barProRight0.x=t.x+t.widthDis+e.draw.barAreaBaseGap+2,e.tooltip.barProRight0.y=t.y+e.barWidth/2,e.tooltip.barProRight0.show=!0},hideTooltipProbar0:function(){this.tooltip.barProRight0.show=!1},showTooltipWinbar1:function(t,i,a){var e=this;t.x=-t.widthDis,e.tooltip.ori=i.toFixed(2),e.tooltip.dif=a.toFixed(2),e.tooltip.isNeg=a<0,e.tooltip.pieAccum=t.arcDisAccum,e.tooltip.pieNow=t.arcDisNow,e.tooltip.barWinLeft1.x=t.x-e.draw.barAreaBaseGap-2,e.tooltip.barWinLeft1.y=t.y+e.barWidth/2,e.tooltip.barWinLeft1.show=!0},hideTooltipWinbar1:function(){this.tooltip.barWinLeft1.show=!1},showTooltipProbar1:function(t,i,a){var e=this;t.x=0,e.tooltip.ori=i.toFixed(2),e.tooltip.dif=a.toFixed(2),e.tooltip.isNeg=a<0,e.tooltip.pieAccum=t.arcDisAccum,e.tooltip.pieNow=t.arcDisNow,e.tooltip.barProRight1.x=t.x+t.widthDis+e.draw.barAreaBaseGap+2,e.tooltip.barProRight1.y=t.y+e.barWidth/2,e.tooltip.barProRight1.show=!0},hideTooltipProbar1:function(){this.tooltip.barProRight1.show=!1},showTooltipWinbar2:function(t,i,a){var e=this;t.x=-t.widthDis,e.tooltip.ori=i.toFixed(2),e.tooltip.dif=a.toFixed(2),e.tooltip.isNeg=a<0,e.tooltip.pieAccum=t.arcDisAccum,e.tooltip.pieNow=t.arcDisNow,e.tooltip.barWinLeft2.x=t.x-e.draw.barAreaBaseGap-2,e.tooltip.barWinLeft2.y=t.y+e.barWidth/2,e.tooltip.barWinLeft2.show=!0},hideTooltipWinbar2:function(){this.tooltip.barWinLeft2.show=!1},showTooltipProbar2:function(t,i,a){var e=this;t.x=0,e.tooltip.ori=i.toFixed(2),e.tooltip.dif=a.toFixed(2),e.tooltip.isNeg=a<0,e.tooltip.pieAccum=t.arcDisAccum,e.tooltip.pieNow=t.arcDisNow,e.tooltip.barProLeft2.x=t.x,e.tooltip.barProLeft2.y=t.y+e.barWidth/2,e.tooltip.barProLeft2.show=!0},hideTooltipProbar2:function(){this.tooltip.barProLeft2.show=!1},highlightRow1:function(t){var i=this;if(i.bar.rowBars1){var a=i.bar.rowBars1.length;i.highlightLine(i.bar.rowBars1,a-1-t),i.highlightLine(i.line.rowLineMatrix1,a-1-t),i.highlightLine(i.line.rowLineMatrix1small,t),i.highlightLine(i.matrixLabelChildRow1,t),i.highlightLine(i.matrixLabelParentRow1,i.childMapParentRow(t,1)),i.highlightMatrixRow(i.matrixRects1.rects,t)}},highlightParentRow1:function(t){var i=this;if(i.bar.rowBars1){var a=i.parentMapChildRow(t,1),e=i.parentMapChildRowReverse(t,1);i.highlightLines(i.bar.rowBars1,e),i.highlightLines(i.line.rowLineMatrix1,e),i.highlightLines(i.line.rowLineMatrix1small,a),i.highlightLines(i.matrixLabelChildRow1,a),i.highlightLine(i.matrixLabelParentRow1,t),i.highlightMatrixRows(i.matrixRects1.rects,a)}},highlightCol1Row2:function(t){var i=this,a=i.matrixRects2.row.length;i.highlightMatrixCol(i.matrixRects1.rects,t),i.highlightMatrixRow(i.matrixRects2.rects,a-1-t),i.highlightLine(i.bar.colBars1,t),i.highlightLine(i.bar.winBars1,t),i.highlightLine(i.line.colLineMatrix1,t),i.highlightLine(i.line.colLineMatrix1small,t),i.highlightLine(i.line.rowLineMatrix2,t),i.highlightLine(i.line.rowLineMatrix2small,a-1-t),i.highlightLine(i.matrixLabelChildCol1,t),i.highlightLine(i.matrixLabelParentCol1,i.childMapParentCol(t)),i.highlightLine(i.matrixLabelChildRow2,a-1-t),i.highlightLine(i.matrixLabelParentRow2,i.childMapParentRow(a-1-t,2))},highlightParentCol1Row2:function(t){var i=this,a=i.parentMapChildCol(t),e=i.parentMapChildRow(4-t,2);i.highlightMatrixCols(i.matrixRects1.rects,a),i.highlightMatrixRows(i.matrixRects2.rects,e),i.highlightLines(i.bar.colBars1,a),i.highlightLines(i.bar.winBars1,a),i.highlightLines(i.line.colLineMatrix1,a),i.highlightLines(i.line.colLineMatrix1small,a),i.highlightLines(i.line.rowLineMatrix2,a),i.highlightLines(i.line.rowLineMatrix2small,e),i.highlightLines(i.matrixLabelChildCol1,a),i.highlightLine(i.matrixLabelParentCol1,t),i.highlightLines(i.matrixLabelChildRow2,e),i.highlightLine(i.matrixLabelParentRow2,4-t)},highlightCol2:function(t){var i=this;i.highlightMatrixCol(i.matrixRects2.rects,t),i.highlightLine(i.matrixLabelChildCol2,t),i.highlightLine(i.matrixLabelParentCol2,i.childMapParentCol(t,2)),i.highlightLine(i.line.colLineMatrix2,t),i.highlightLine(i.line.colLineMatrix2small,t),i.highlightLine(i.bar.colBars2,t),i.highlightLine(i.bar.winBars2,t)},highlightParentCol2:function(t){var i=this,a=i.parentMapChildCol(t);i.highlightMatrixCols(i.matrixRects2.rects,a),i.highlightLine(i.matrixLabelParentCol2,t),i.highlightLines(i.matrixLabelChildCol2,a),i.highlightLines(i.line.colLineMatrix2,a),i.highlightLines(i.line.colLineMatrix2small,a),i.highlightLines(i.bar.colBars2,a),i.highlightLines(i.bar.winBars2,a)},highlightMatrix1:function(t,i){var a=this;if(a.bar.rowBars1){var e=a.bar.rowBars1.length,r=a.matrixRects1.col.length;a.highlightLine(a.bar.rowBars1,e-1-t),a.highlightLine(a.line.rowLineMatrix1,e-1-t),a.highlightLine(a.line.rowLineMatrix1small,t),a.highlightLine(a.matrixLabelChildRow1,t),a.highlightLine(a.matrixLabelParentRow1,a.childMapParentRow(t,1)),a.highlightMatrixSingle(a.matrixRects1.rects,t,i),a.highlightMatrixRow(a.matrixRects2.rects,r-1-i),a.highlightLine(a.matrixLabelChildCol1,i),a.highlightLine(a.matrixLabelParentCol1,a.childMapParentCol(i,1)),a.highlightLine(a.line.colLineMatrix1,i),a.highlightLine(a.line.colLineMatrix1small,i),a.highlightLine(a.bar.colBars1,i),a.highlightLine(a.bar.winBars1,i),a.highlightLine(a.line.rowLineMatrix2,i),a.highlightLine(a.line.rowLineMatrix2small,r-1-i),a.highlightLine(a.matrixLabelChildRow2,r-1-i),a.highlightLine(a.matrixLabelParentRow2,a.childMapParentRow(r-1-i,2))}},highlightMatrix2:function(t,i){var a=this,e=a.bar.colBars1.length;a.highlightMatrixCol(a.matrixRects1.rects,e-1-t),a.highlightLine(a.matrixLabelChildCol1,e-1-t),a.highlightLine(a.matrixLabelParentCol1,a.childMapParentCol(e-1-t,1)),a.highlightLine(a.line.colLineMatrix1,e-1-t),a.highlightLine(a.line.colLineMatrix1small,e-1-t),a.highlightLine(a.bar.colBars1,e-1-t),a.highlightLine(a.bar.winBars1,e-1-t),a.highlightLine(a.line.rowLineMatrix2,e-1-t),a.highlightLine(a.line.rowLineMatrix2small,t),a.highlightLine(a.matrixLabelChildRow2,t),a.highlightLine(a.matrixLabelParentRow2,a.childMapParentRow(t,2)),a.highlightMatrixSingle(a.matrixRects2.rects,t,i),a.highlightLine(a.matrixLabelChildCol2,i),a.highlightLine(a.matrixLabelParentCol2,a.childMapParentCol(i,2)),a.highlightLine(a.line.colLineMatrix2,i),a.highlightLine(a.line.colLineMatrix2small,i),a.highlightLine(a.bar.colBars2,i),a.highlightLine(a.bar.winBars2,i)},childMapParentRow:function(t,i){return 1===this.strokeFrom&&1===i?0:t<3?0:t<6?1:t<9?2:t<15?3:4},childMapParentCol:function(t){return t<3?0:t<9?1:t<12?2:t<15?3:4},parentMapChildRow:function(t,i){if(1===this.strokeFrom&&1===i)return[0,1,2,3,4,5,6,7,8];switch(t){case 0:return[0,1,2];case 1:return[3,4,5];case 2:return[6,7,8];case 3:return[9,10,11,12,13,14];case 4:return[15,16,17]}},parentMapChildRowReverse:function(t,i){if(1===this.strokeFrom&&1===i)return[0,1,2,3,4,5,6,7,8];switch(t){case 0:return[15,16,17];case 1:return[9,10,11,12,13,14];case 2:return[6,7,8];case 3:return[3,4,5];case 4:return[0,1,2]}},parentMapChildCol:function(t){switch(t){case 0:return[0,1,2];case 1:return[3,4,5,6,7,8];case 2:return[9,10,11];case 3:return[12,13,14];case 4:return[15,16,17]}},parentMapChildColReverse:function(t){switch(t){case 0:return[15,16,17];case 1:return[12,13,14];case 2:return[9,10,11];case 3:return[3,4,5,6,7,8];case 4:return[0,1,2]}},highlightLine:function(t,i){t&&t.length&&t.forEach(function(t,a){t.isHighlight=a===i})},highlightLines:function(t,i){t&&t.length&&t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})},highlightMatrixRow:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,e){t.isHighlight=a===i})})},highlightMatrixRows:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,e){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixCol:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){t.isHighlight=a===i})})},highlightMatrixCols:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixSingle:function(t,i,a){t&&t.length&&t.forEach(function(t,e){t.forEach(function(t,r){t.isHighlight=e===i||r===a})})},recoverLine:function(t){t&&t.length&&t.forEach(function(t){t.isHighlight=!1})},recoverMatrix:function(t){t&&t.length&&t.forEach(function(t){t.forEach(function(t){t.isHighlight=!1})})},recoverAll:function(){var t=this;t.recoverLine(t.bar.rowBars1),t.recoverLine(t.bar.colBars1),t.recoverLine(t.bar.colBars2),t.recoverLine(t.bar.winBars1),t.recoverLine(t.bar.winBars2),t.recoverLine(t.matrixLabelChildRow1),t.recoverLine(t.matrixLabelChildRow2),t.recoverLine(t.matrixLabelChildCol1),t.recoverLine(t.matrixLabelChildCol2),t.recoverLine(t.matrixLabelParentRow1),t.recoverLine(t.matrixLabelParentRow2),t.recoverLine(t.matrixLabelParentCol1),t.recoverLine(t.matrixLabelParentCol2),t.recoverLine(t.line.rowLineMatrix1),t.recoverLine(t.line.rowLineMatrix1small),t.recoverLine(t.line.colLineMatrix1),t.recoverLine(t.line.colLineMatrix1small),t.recoverLine(t.line.rowLineMatrix2),t.recoverLine(t.line.rowLineMatrix2small),t.recoverLine(t.line.colLineMatrix2),t.recoverLine(t.line.colLineMatrix2small),t.recoverMatrix(t.matrixRects1.rects),t.recoverMatrix(t.matrixRects2.rects)},calcStateMatrix:function(t){var i=this;if(!(t>=i.allMarkovStateOri.length-1)){var a=i.allMarkovStateOri[t],e=i.allMarkovStateOri[t+1],r=i.allMarkovStateShift[t],s=i.allMarkovStateShift[t+1],o=i.allMarkovStateShiftAccum[t],l=o.calcNextMarkovState(i.transMatrix),n=a.calcNextWinState(i.transMatrix)[1],h=e.calcNextWinState(i.transMatrix)[0],c=void 0,d=void 0,u=void 0,x=void 0;i.allMarkovStateShift.length>0&&(c=r.calcNextWinState(i.transMatrix)[1],d=s.calcNextWinState(i.transMatrix)[0],u=o.calcNextWinState(i.transMatrix)[1],x=l.calcNextWinState(i.transMatrix)[0]),0===t?(i.stateMatrixArray[0]=new p.b(a,r,o,0,i.StateID_index),i.stateMatrixArray[1]=new p.e(e,s,l,1,i.StateID_index),i.winStateArray[0]=new p.b(n,c,u,0,i.StateID_index),i.winStateArray[1]=new p.e(h,d,x,1,i.StateID_index)):(i.stateMatrixArray[0]=new p.e(a,r,o,0,i.StateID_index),i.stateMatrixArray[1]=new p.e(e,s,l,1,i.StateID_index),i.winStateArray[0]=new p.e(n,c,u,0,i.StateID_index),i.winStateArray[1]=new p.e(h,d,x,1,i.StateID_index))}}}},f={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"matrixdetail-view"}},[t._m(0),t._v(" "),a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("defs",[a("pattern",{attrs:{id:"stripe",width:"1",height:"0.1"}},[a("path",{attrs:{d:"M 0 0 L 100 0",stroke:"white","stroke-width":"1"}})])]),t._v(" "),a("g",{attrs:{transform:"translate(4, "+(t.draw.padding+ +t.transformYforCentral)+")"}},[a("g",{attrs:{id:"statematrix1"}},[a("g",{attrs:{id:"statematrix1-rowbar",transform:"translate(0, "+t.draw.slotWidth/Math.sqrt(2)+")"}},[""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"0",y1:"-5",x2:"0",y2:t.bar.rowBar1BaseY}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"0",y1:"-1",x2:t.barMaxHeight,y2:-1}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:t.barMaxHeight,y1:"0",x2:t.barMaxHeight,y2:-5}}):t._e(),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight-10,y:"-8"}},[t._v(t._s(t.barMaxValue))]),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight+3,y:"3"}},[t._v("Not score")]):t._e(),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"-3",y:"-8"}},[t._v("0")]):t._e(),t._v(" "),t._l(t.bar.rowBars1,function(i,e){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},attrs:{transform:"translate("+t.draw.barAreaBaseGap+", 0)"},on:{mouseover:function(a){return t.mouseoverRowBars1(i,e,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveRowBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),t._v(" "),a("g",{attrs:{id:"statematrix1-line-row"}},t._l(t.line.rowLineMatrix1,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0)],2),t._v(" "),a("g",{attrs:{id:"statematrix1-matrixArea",transform:"translate("+(t.draw.barAreaBaseGap+t.draw.barAreaWidth+t.MatrixAreaWidth/2)+", 0) rotate(-45)"}},[a("g",{staticClass:"strokeNum",attrs:{id:"strokeNum1"}},[a("path",{staticClass:"strokeNum player0",attrs:{d:"M "+-t.draw.slotBackPadding+" "+t.draw.slotBackPadding+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+t.draw.slotBackPadding+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" Z"}}),t._v(" "),a("text",{staticClass:"row",attrs:{transform:"translate("+-t.draw.slotWidth/2+", "+t.draw.slotWidth/2+") rotate(45) translate("+-t.draw.strokeNumTextPadding+", 0)"}},[t._v(t._s(t.strokeFrom))])]),t._v(" "),a("g",{staticClass:"strokeNum",attrs:{id:"strokeNum2"}},[a("path",{staticClass:"strokeNum player1",attrs:{d:"M "+-t.draw.slotBackPadding+" "+t.draw.slotBackPadding+" L "+-t.draw.slotBackPadding+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" Z"}}),t._v(" "),a("text",{staticClass:"col",attrs:{transform:"translate("+-t.draw.slotWidth/2+", "+t.draw.slotWidth/2+") rotate(45) translate("+t.draw.strokeNumTextPadding+", 0)"}},[t._v(t._s(t.strokeFrom+1))])]),t._v(" "),a("g",{staticClass:"slotback",attrs:{transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", 0)"}},[a("rect",{staticClass:"player0",attrs:{x:0,y:t.draw.slotBackPadding,width:t.transformXserve,height:t.draw.slotWidth-2*t.draw.slotBackPadding}}),t._v(" "),a("rect",{staticClass:"player1",attrs:{x:t.transformXserve+t.draw.slotBackPadding,y:t.draw.slotWidth,width:t.draw.slotWidth-2*t.draw.slotBackPadding,height:t.MatrixWidth}})]),t._v(" "),a("g",{attrs:{id:"statematrix1-line-row-small",transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", 0)"}},t._l(t.line.rowLineMatrix1small,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x,x2:t.x,y1:t.y1,y2:t.y2}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-line-col-small",transform:"translate("+-t.draw.slotWidth+", "+t.draw.slotWidth+")"}},t._l(t.line.colLineMatrix1small,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-matrix",transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", "+t.draw.slotWidth+")"}},[t._l(t.matrixRects1.rects,function(i,e){return t.rectWidth>0?a("g",{key:"rect-row"+e,staticClass:"rectRow"},t._l(i,function(i,r){return a("rect",{key:i.id,staticClass:"rect",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:t.rectWidth,height:t.rectWidth},on:{mouseover:function(a){return t.mouseoverMatrix1(i,e,r)},mouseleave:t.mouseleaveMatrix1}})}),0):t._e()}),t._v(" "),t._l(t.matrix.circles1,function(i,e){return a("g",{key:"circle-row"+e,staticClass:"circleRow"},t._l(i,function(t){return a("g",{key:t.id,staticClass:"circle"},[t.isNeg?[a("circle",{staticClass:"Dis neg",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]:[a("circle",{staticClass:"Dis",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]],2)}),0)})],2),t._v(" "),a("g",{attrs:{id:"statematrix1-rowLabel-parent",transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", 5)"}},t._l(t.matrixLabelParentRow1,function(i,e){return t.rectWidth>0?a("g",{key:"label-group"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightParentRow1(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:0,width:i.width,height:t.rectWidth,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:t.rectWidth/2}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-rowLabel-child",transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", "+(t.draw.slotWidth-5)+")"}},t._l(t.matrixLabelChildRow1,function(i,e){return t.rectWidth>0?a("g",{key:"label"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightRow1(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:-i.height,width:i.width,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:0,y:0,transform:"translate("+(i.x+i.width/2)+", "+-i.height/2+") rotate(90)"}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-colLabel-parent",transform:"translate(-5, "+t.draw.slotWidth+")"}},t._l(t.matrixLabelParentCol1,function(i,e){return t.rectWidth>0?a("g",{key:"label-group-col"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.mouseoverParentCol1(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:-t.rectWidth,y:i.y,width:t.rectWidth,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{transform:"translate("+-t.rectWidth/2+", "+(i.y+i.height/2)+") rotate(90)",x:0,y:0}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-colLabel-child",transform:"translate("+(5-t.draw.slotWidth)+", "+t.draw.slotWidth+")"}},t._l(t.matrixLabelChildCol1,function(i,e){return t.rectWidth>0?a("g",{key:"label-col"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.mouseoverChildCol1(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:0,y:i.y,width:i.width,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.width/2,y:i.y+i.height/2}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"tooltip-matrix1",transform:"translate("+(-t.draw.slotWidth-t.transformXserve)+", "+t.draw.slotWidth+")"}},[t.tooltip.matrixBottom1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom-1",transform:"translate("+t.tooltip.matrixBottom1.x+", "+t.tooltip.matrixBottom1.y+") rotate(45)"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:8+t.tooltip.height/4}},[t._v("\n                Diff: "+t._s(t.tooltip.dif)+"%\n              ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 38 L 20 38 L 50 68"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:8+3*t.tooltip.height/4}},[t._v("\n                Ori: "+t._s(t.tooltip.ori)+"%\n              ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, 38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixTop1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-top-1",transform:"translate("+t.tooltip.matrixTop1.x+", "+t.tooltip.matrixTop1.y+") rotate(45)"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:3*-t.tooltip.height/4-8}},[t._v("\n                Diff: "+t._s(t.tooltip.dif)+"%\n              ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 -38 L 20 -38 L 50 -8"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height/4-8}},[t._v("\n                Ori: "+t._s(t.tooltip.ori)+"%\n              ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, -38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e()])]),t._v(" "),a("g",{attrs:{id:"statematrix1-colbar",transform:"translate("+(2*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"0",y1:"-5",x2:"0",y2:t.bar.colBar1BaseY}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"1",y1:"-1",x2:-t.barMaxHeight,y2:-1}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:-t.barMaxHeight,y1:"0",x2:-t.barMaxHeight,y2:-5}}):t._e(),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:-t.barMaxHeight-20,y:"-8"}},[t._v(t._s(t.barMaxValue))]),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:-t.barMaxHeight-37,y:"3"}},[t._v("Score")]):t._e(),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"-3",y:"-8"}},[t._v("0")]):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"-1",y1:"-1",x2:t.barMaxHeight,y2:-1}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:t.barMaxHeight,y1:"0",x2:t.barMaxHeight,y2:-5}}):t._e(),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight-10,y:"-8"}},[t._v(t._s(t.barMaxValue))]),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight+3,y:"3"}},[t._v("Not score")]):t._e(),t._v(" "),a("g",{attrs:{id:"statematrix1-colbar-win",transform:"translate(-"+t.draw.barAreaBaseGap+", 0)"}},t._l(t.bar.winBars1,function(i,e){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverWinBars1(i,e,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveWinBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:-i.widthDis,y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-colbar-pro",transform:"translate("+t.draw.barAreaBaseGap+", 0)"}},t._l(t.bar.colBars1,function(i,e){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverProBars1(i,e,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveProBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),0),t._v(" "),a("g",{attrs:{id:"statematrix1-line-col",transform:"translate(0, 0)"}},t._l(t.line.colLineMatrix1,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-line-row",transform:"translate(0, 0)"}},t._l(t.line.rowLineMatrix2,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0)]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-0",transform:"translate(0, "+t.draw.slotWidth/Math.sqrt(2)+")"}},[t.tooltip.barProRight0.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-0",transform:"translate("+t.tooltip.barProRight0.x+", "+t.tooltip.barProRight0.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/4}},[t._v("\n              Diff: "+t._s(t.tooltip.dif)+"%\n            ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 30"}}),t._v(" "),a("text",{attrs:{x:18,y:t.tooltip.height/4}},[t._v("\n              Ori: "+t._s(t.tooltip.ori)+"%\n            ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e()])]),t._v(" "),a("g",{attrs:{id:"statematrix2"}},[a("g",{attrs:{id:"statematrix2-matrixArea",transform:"translate("+(3*(t.draw.barAreaBaseGap+t.draw.barAreaWidth)+3*t.MatrixAreaWidth/2)+", 0) rotate(-45)"}},[a("g",{staticClass:"strokeNum",attrs:{id:"strokeNum3"}},[a("path",{staticClass:"strokeNum player1",attrs:{d:"M "+-t.draw.slotBackPadding+" "+t.draw.slotBackPadding+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+t.draw.slotBackPadding+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" Z"}}),t._v(" "),a("text",{staticClass:"row",attrs:{transform:"translate("+-t.draw.slotWidth/2+", "+t.draw.slotWidth/2+") rotate(45) translate("+-t.draw.strokeNumTextPadding+", 0)"}},[t._v(t._s(t.strokeFrom+1))])]),t._v(" "),a("g",{staticClass:"strokeNum",attrs:{id:"strokeNum4"}},[a("path",{staticClass:"strokeNum player0",attrs:{d:"M "+-t.draw.slotBackPadding+" "+t.draw.slotBackPadding+" L "+-t.draw.slotBackPadding+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" L "+(-t.draw.slotWidth+t.draw.slotBackPadding)+" "+(t.draw.slotWidth-t.draw.slotBackPadding)+" Z"}}),t._v(" "),a("text",{staticClass:"col",attrs:{transform:"translate("+-t.draw.slotWidth/2+", "+t.draw.slotWidth/2+") rotate(45) translate("+t.draw.strokeNumTextPadding+", 0)"}},[t._v(t._s(t.strokeFrom+2))])]),t._v(" "),a("g",{staticClass:"slotback",attrs:{transform:"translate("+(-t.draw.slotWidth-t.MatrixWidth)+", 0)"}},[a("rect",{staticClass:"player1",attrs:{x:0,y:t.draw.slotBackPadding,width:t.MatrixWidth,height:t.draw.slotWidth-2*t.draw.slotBackPadding}}),t._v(" "),a("rect",{staticClass:"player0",attrs:{x:t.MatrixWidth+t.draw.slotBackPadding,y:t.draw.slotWidth,width:t.draw.slotWidth-2*t.draw.slotBackPadding,height:t.MatrixWidth}})]),t._v(" "),a("g",{attrs:{id:"statematrix2-line-row-small",transform:"translate("+(-t.MatrixWidth-t.draw.slotWidth)+", 0)"}},t._l(t.line.rowLineMatrix2small,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x,x2:t.x,y1:t.y1,y2:t.y2}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-line-col-small",transform:"translate("+-t.draw.slotWidth+", "+t.draw.slotWidth+")"}},t._l(t.line.colLineMatrix2small,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-matrix",transform:"translate("+(-t.MatrixWidth-t.draw.slotWidth)+", "+t.draw.slotWidth+")"}},[t._l(t.matrixRects2.rects,function(i,e){return t.rectWidth>0?a("g",{key:"rect-row"+e,staticClass:"rectRow"},t._l(i,function(i,r){return a("rect",{key:i.id,staticClass:"rect",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:t.rectWidth,height:t.rectWidth},on:{mouseover:function(a){return t.mouseoverMatrix2(i,e,r)},mouseleave:t.mouseleaveMatrix2}})}),0):t._e()}),t._v(" "),t._l(t.matrix.circles2,function(i,e){return"pro"===t.nowMode?a("g",{key:"circle-row"+e,staticClass:"circleRow"},t._l(i,function(t){return a("g",{key:t.id,staticClass:"circle"},[t.isNeg?[a("circle",{staticClass:"Dis neg",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]:[a("circle",{staticClass:"Dis",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]],2)}),0):t._e()}),t._v(" "),t._l(t.matrix.winRects2,function(i,e){return"win"===t.nowMode?a("g",{key:"winrect-row"+e},t._l(i,function(i){return a("g",{key:i.id,staticClass:"winrect"},[a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:i.x+t.rectWidth/2-i.widthDis/2,y:i.y+t.rectWidth/2-i.widthDis/2,width:i.widthDis,height:i.widthDis}})])}),0):t._e()})],2),t._v(" "),a("g",{attrs:{id:"statematrix2-rowLabel-parent",transform:"translate("+(-t.MatrixWidth-t.draw.slotWidth)+", 5)"}},t._l(t.matrixLabelParentRow2,function(i,e){return t.rectWidth>0?a("g",{key:"label-group-row"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.mouseoverParentRow2(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:0,width:i.width,height:t.rectWidth,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:t.rectWidth/2}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-rowLabel-child",transform:"translate("+(-t.MatrixWidth-t.draw.slotWidth)+", "+(t.draw.slotWidth-5)+")"}},t._l(t.matrixLabelChildRow2,function(i,e){return t.rectWidth>0?a("g",{key:"label-row"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.mouseoverChildRow2(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:-i.height,width:i.width,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:0,y:0,transform:"translate("+(i.x+i.width/2)+", "+-i.height/2+") rotate(90)"}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-colLabel-parent",transform:"translate(-5, "+t.draw.slotWidth+")"}},t._l(t.matrixLabelParentCol2,function(i,e){return t.rectWidth>0?a("g",{key:"label-group-col"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightParentCol2(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:-t.rectWidth,y:i.y,width:t.rectWidth,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{transform:"translate("+-t.rectWidth/2+", "+(i.y+i.height/2)+") rotate(90)",x:0,y:0}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-colLabel-child",transform:"translate("+(5-t.draw.slotWidth)+", "+t.draw.slotWidth+")"}},t._l(t.matrixLabelChildCol2,function(i,e){return t.rectWidth>0?a("g",{key:"label-col"+e,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){return t.highlightCol2(e)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:0,y:i.y,width:i.width,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.width/2,y:i.y+i.height/2}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),0),t._v(" "),a("g",{attrs:{id:"tooltip-matrix2",transform:"translate("+(-t.MatrixWidth-t.draw.slotWidth)+", "+t.draw.slotWidth+")"}},[t.tooltip.matrixTop2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-top-2",transform:"translate("+t.tooltip.matrixTop2.x+", "+t.tooltip.matrixTop2.y+") rotate(45)"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:3*-t.tooltip.height/4-8}},[t._v("\n                Diff: "+t._s(t.tooltip.dif)+"%\n              ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 -38 L 20 -38 L 50 -8"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height/4-8}},[t._v("\n                Ori: "+t._s(t.tooltip.ori)+"%\n              ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, -38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixBottom2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom-2",transform:"translate("+t.tooltip.matrixBottom2.x+", "+t.tooltip.matrixBottom2.y+") rotate(45)"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:8+t.tooltip.height/4}},[t._v("\n                Diff: "+t._s(t.tooltip.dif)+"%\n              ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 38 L 20 38 L 50 68"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:8+3*t.tooltip.height/4}},[t._v("\n                Ori: "+t._s(t.tooltip.ori)+"%\n              ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, 38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e()])]),t._v(" "),a("g",{attrs:{id:"statematrix2-colbar",transform:"translate("+(4*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+2*t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"0",y1:"-5",x2:"0",y2:t.bar.colBar2BaseY}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"1",y1:"-1",x2:-t.barMaxHeight,y2:-1}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:-t.barMaxHeight,y1:"0",x2:-t.barMaxHeight,y2:-5}}):t._e(),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:-t.barMaxHeight-20,y:"-8"}},[t._v(t._s(t.barMaxValue))]),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:-t.barMaxHeight-37,y:"3"}},[t._v("Score")]):t._e(),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:"-3",y:"-8"}},[t._v("0")]):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:"-1",y1:"-1",x2:t.barMaxHeight,y2:-1}}):t._e(),t._v(" "),""!==t.barMaxValue?a("line",{staticClass:"barbase",attrs:{x1:t.barMaxHeight,y1:"0",x2:t.barMaxHeight,y2:-5}}):t._e(),t._v(" "),""!==t.barMaxValue?a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight+3,y:"3"}},[t._v("Not score")]):t._e(),t._v(" "),a("text",{staticStyle:{"font-size":"0.8rem"},attrs:{x:t.barMaxHeight-10,y:"-8"}},[t._v(t._s(t.barMaxValue))]),t._v(" "),a("g",{attrs:{id:"statematrix2-line-col",transform:"translate(0, 0)"}},t._l(t.line.colLineMatrix2,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-colbar-win",transform:"translate(-"+t.draw.barAreaBaseGap+", 0)"}},t._l(t.bar.winBars2,function(i,e){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverWinBars2(i,e,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveWinBars2}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:-i.widthDis,y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),0),t._v(" "),a("g",{attrs:{id:"statematrix2-colbar-pro",transform:"translate("+t.draw.barAreaBaseGap+", 0)"}},t._l(t.bar.colBars2,function(i,e){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){return t.mouseoverProBars2(i,e,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveProBars2}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),0),t._v(" "),null!==t.bar.winBars2?a("g",{staticClass:"mode",class:{choose:t.winMode.choose},attrs:{id:"win-mode"},on:{click:function(i){return t.setMode("win")}}},[a("g",{attrs:{transform:"translate(-16, "+(t.bar.colBar2BaseY+8)+")"}},[a("icon",{attrs:{name:"eye",scale:"1"}})],1),t._v(" "),a("path",{staticClass:"choose-border",attrs:{d:"M 0 0 L -15 0 L -15 "+t.bar.colBar2BaseY+" L 0 "+t.bar.colBar2BaseY}})]):t._e(),t._v(" "),null!==t.bar.colBars2?a("g",{staticClass:"mode",class:{choose:t.proMode.choose},attrs:{id:"pro-mode"},on:{click:function(i){return t.setMode("pro")}}},[a("g",{attrs:{transform:"translate(4, "+(t.bar.colBar2BaseY+8)+")"}},[a("icon",{attrs:{name:"eye",scale:"1"}})],1),t._v(" "),a("path",{staticClass:"choose-border",attrs:{d:"M 0 0 L 32 0 L 32 "+t.bar.colBar2BaseY+" L 0 "+t.bar.colBar2BaseY}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-2",transform:"translate("+(4*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+2*t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[t.tooltip.barProLeft2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-left-2",transform:"translate("+t.tooltip.barProLeft2.x+", "+t.tooltip.barProLeft2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/4}},[t._v("\n              Diff: "+t._s(t.tooltip.dif)+"%\n            ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:t.tooltip.height/4}},[t._v("\n              Ori: "+t._s(t.tooltip.ori)+"%\n            ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-winbar-2",transform:"translate("+(4*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+2*t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[t.tooltip.barWinLeft2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-2",transform:"translate("+t.tooltip.barWinLeft2.x+", "+t.tooltip.barWinLeft2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/4}},[t._v("\n              Diff: "+t._s(t.tooltip.dif)+"%\n            ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:t.tooltip.height/4}},[t._v("\n              Ori: "+t._s(t.tooltip.ori)+"%\n            ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e()])]),t._v(" "),a("g",{attrs:{id:"tooltip-winbar-1",transform:"translate("+(2*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[t.tooltip.barWinLeft1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-1",transform:"translate("+t.tooltip.barWinLeft1.x+", "+t.tooltip.barWinLeft1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/4}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:t.tooltip.height/4}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-1",transform:"translate("+(2*(t.draw.barAreaWidth+t.draw.barAreaBaseGap)+t.MatrixAreaWidth)+", "+t.draw.slotWidth/Math.sqrt(2)+")"}},[t.tooltip.barProRight1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-1",transform:"translate("+t.tooltip.barProRight1.x+", "+t.tooltip.barProRight1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/4}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 30"}}),t._v(" "),a("text",{attrs:{x:18,y:t.tooltip.height/4}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e()])])])])},staticRenderFns:[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view-header",staticStyle:{position:"relative"}},[a("div",{staticClass:"view-title"},[t._v("Impact View")]),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd"},[a("div",{attrs:{id:"matrixdetail-lengnd2"}},[a("div",{staticClass:"matrixdetail-lengnd2-glyph-wrap",staticStyle:{width:"80px",height:"20px"}},[a("div",{staticClass:"matrixdetail-lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd1-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd1-glyph"})]),t._v(" "),a("div",{staticStyle:{height:"20px"}},[a("span",[t._v("Impact on scoring probability")])])]),t._v(" "),a("div",{attrs:{id:"matrixdetail-lengnd2"}},[a("div",{staticClass:"matrixdetail-lengnd2-glyph-wrap",staticStyle:{width:"80px",height:"20px"}},[a("div",{staticClass:"matrixdetail-lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd2-glyph"}),t._v(" "),a("div",{staticClass:"matrixdetail-lengnd2-glyph"})]),t._v(" "),a("div",{staticStyle:{height:"20px"}},[a("span",[t._v("Impact on state probability")])])])])])}]};var b={name:"MarkovStateCtl",components:{MatrixOverview:m,MatrixDetail:a("VU/8")(v,f,!1,function(t){a("XfW/")},null,null).exports},props:["shift","transMatrix","dim","state0Prop","stateArray","allMarkovStateOri","StateID_index","Index_StateID","K","B","start","strokeFromApp","chooseName"],data:function(){return{strokeSet:!1,strokeFromSet:null}},computed:{allMarkovStateShift:function(){if(-1!==this.shift.stateID){var t=[],i=[];return this.calcMarkovStateShift(t,i,this.start,this.shift),console.log("change MarkovStateShift"),{shift:t,accum:i}}},strokeFromReal:function(){return this.strokeSet?this.strokeFromSet:this.strokeFromApp}},watch:{start:function(){this.strokeFromSet=null,this.strokeSet=!1},chooseName:function(){this.strokeFromSet=null,this.strokeSet=!1}},methods:{onSetStroke:function(t){this.strokeFromSet=t,this.strokeSet=!0},calcMarkovStateShift:function(t,i,a,e){var r=this,s=e.stateID,o=e.type;if("single"===o){if(s<198&&!a){var l=new p.a(r.state0Prop,r.stateArray),n=l.shiftPro(s,r.StateID_index,r.K,r.B);t.push(n),i.push(l);var h=1,c=n,d=void 0;do{c=(d=c).calcNextMarkovState(r.transMatrix),i.push(c),t.push(c),h++}while((Math.abs(d.proArray[r.dim-2]-c.proArray[r.dim-2])>1e-5||Math.abs(d.proArray[r.dim-1]-c.proArray[r.dim-1])>1e-5||0===d.proArray[r.dim-1]||0===d.proArray[r.dim-2])&&h<35)}else if(s<486&&s>=198){var u=new p.a(r.state0Prop,r.stateArray);t.push(u),i.push(u);var x=1,w=u,m=void 0;do{w=(m=w).calcNextMarkovState(r.transMatrix),i.push(w),x%2===a&&(w=w.shiftPro(s,r.StateID_index,r.K,r.B)),t.push(w),x++}while((Math.abs(m.proArray[r.dim-2]-w.proArray[r.dim-2])>1e-5||Math.abs(m.proArray[r.dim-1]-w.proArray[r.dim-1])>1e-5||0===m.proArray[r.dim-1]||0===m.proArray[r.dim-2])&&x<35)}}else if("group"===o)if(s<198&&!a){var g=new p.a(r.state0Prop,r.stateArray),_=g.shiftProGroup(s,r.StateID_index,r.K,r.B);i.push(g),t.push(_);var v=1,f=_,b=void 0;do{f=(b=f).calcNextMarkovState(r.transMatrix),i.push(f),t.push(f),v++}while((Math.abs(b.proArray[r.dim-2]-f.proArray[r.dim-2])>1e-5||Math.abs(b.proArray[r.dim-1]-f.proArray[r.dim-1])>1e-5||0===b.proArray[r.dim-1]||0===b.proArray[r.dim-2])&&v<35)}else if(s<486&&s>=198){var M=new p.a(r.state0Prop,r.stateArray);i.push(M),t.push(M);var y=1,L=M,S=void 0;do{L=(S=L).calcNextMarkovState(r.transMatrix),i.push(L),y%2===a&&(L=L.shiftProGroup(s,r.StateID_index,r.K,r.B)),t.push(L),y++}while((Math.abs(S.proArray[r.dim-2]-L.proArray[r.dim-2])>1e-5||Math.abs(S.proArray[r.dim-1]-L.proArray[r.dim-1])>1e-5||0===S.proArray[r.dim-1]||0===S.proArray[r.dim-2])&&y<35)}}}},M={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view-container",attrs:{id:"markovstate-container"}},[a("MatrixOverview",{attrs:{transMatrix:t.transMatrix,dim:t.dim,allMarkovStateOri:t.allMarkovStateOri,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,start:t.start,allMarkovStateShift:t.allMarkovStateShift.shift,allMarkovStateShiftAccum:t.allMarkovStateShift.accum,strokeFrom:t.strokeFromReal},on:{setStroke:t.onSetStroke}}),t._v(" "),a("MatrixDetail",{attrs:{transMatrix:t.transMatrix,allMarkovStateOri:t.allMarkovStateOri,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,strokeFrom:t.strokeFromReal,allMarkovStateShift:t.allMarkovStateShift.shift,allMarkovStateShiftAccum:t.allMarkovStateShift.accum,shift:t.shift,K:t.K,B:t.B}})],1)},staticRenderFns:[]};var y=a("VU/8")(b,M,!1,function(t){a("lIXE")},null,null).exports,L=a("mtWM"),S=a.n(L),k={name:"App",components:{Players:l,WinDisMatrix:d,MarkovStateCtl:y},data:function(){return{K:.05,B:.25,start:0,playerWinDis:null,chooseName:null,nowPlayerset:null,state0Count:new Array(488).fill(0),state0Prop:null,transMatrix:new p.f,allMarkovState:null,stateArray:[],dim:null,StateID_index:{},Index_StateID:{},shift:{shiftStateID:null,type:null}}},mounted:function(){var t=this;S.a.get("./static/datasets/playersServe.json").then(function(i){t.playerWinDis=i.data})},computed:{strokeFrom:function(){return this.start+1},state0PropNow:function(){if(this.state0Prop)return this.state0Prop[this.start]},allMarkovStateNow:function(){if(this.allMarkovState)return this.allMarkovState[this.start]},endState:function(){if(this.allMarkovStateNow)return this.allMarkovStateNow[this.allMarkovStateNow.length-1]}},methods:{onChooseFile:function(t){var i=t[0];this.chooseName=i,this.readFile(i),this.shift.shiftStateID=null,this.shift.type=null},onSetShift:function(t){this.shift.shiftStateID=t[0],this.shift.type=t[1]},onSetStart:function(t){var i=this;i.shift.shiftStateID=null,i.shift.type=null,0===t?S.a.get("./static/datasets/playersServe.json").then(function(a){i.playerWinDis=a.data,i.start=t}):S.a.get("./static/datasets/playersReceive.json").then(function(a){i.playerWinDis=a.data,i.start=t})},readFile:function(t){var i=this;console.log("----readFile----"),console.log(t),S.a.get("./static/datasets/"+t+".json").then(function(t){var a=t.data;i.nowPlayerset={strikes:a}}).then(function(){i.calcTransMatrix(),i.calcState0Prop(i.state0Count,i.transMatrix.keepRow),i.calcMarkovState(i.state0Prop,i.transMatrix)}).catch(function(t){console.log(t)})},calcTransMatrix:function(){var t=this;t.transMatrix=new p.f,t.state0Count=new Array(488).fill(0),t.state0Prop=null;var i=t.nowPlayerset.strikes,a=i.length;i.forEach(function(e,r){if(r+1<a){var s=e,o=i[r+1];if(o.index-s.index==1){var l=new p.c(s,o);if(0===s.strikeTech&&-1!==l.id&&(t.state0Count[l.id]++,-1!==o.win&&(t.transMatrix.accumCountMatrix(l.id,486+o.win),l.id%2===o.win&&console.error("serve"))),r+2<a){var n=i[r+2];if(n.index-o.index==1&&-1===s.win&&-1===o.win&&0!==o.strikeTech&&0!==n.strikeTech){var h=new p.c(o,n);-1!==l.id&&-1!==h.id?(t.transMatrix.accumCountMatrix(l.id,h.id),-1!==n.win&&t.transMatrix.accumCountMatrix(h.id,486+n.win)):-1!==l.id&&-1!==n.win&&l.id%2!==n.win&&t.transMatrix.accumCountMatrix(l.id,486+n.win)}}}}}),t.transMatrix.calcProMatrix()},calcState0Prop:function(t,i){var a=this;a.stateArray=[],a.dim=null,a.StateID_index={},a.Index_StateID={};var e=[];i.forEach(function(i,r){e.push(t[i]),a.StateID_index[i]=r,a.Index_StateID[r]=i,a.stateArray.push(new p.d(i))}),a.dim=a.stateArray.length,a.state0Prop=a.calcProState(e)},calcMarkovState:function(t,i){var a=this,e=new p.a(t[0],a.stateArray),r=new p.a(t[1],a.stateArray),s=a.MarkovProcessing(e,i),o=a.MarkovProcessing(r,i);a.allMarkovState=[s,o]},calcProState:function(t){var i=this,a=[],e=[],r=0,s=0;if(t.forEach(function(t,o){i.Index_StateID[o]%2?(a.push(0),r+=0,e.push(t),s+=t):(a.push(t),r+=t,e.push(0),s+=0)}),0!==r&&0!==s){var o=[],l=[];return a.forEach(function(t){o.push(t/r)}),e.forEach(function(t){l.push(t/s)}),[o,l]}console.error("sum = 0 in state0Count")},MarkovProcessing:function(t,i){var a=this,e=0,r=[];r.push(t);var s=t,o=void 0;do{s=(o=s).calcNextMarkovState(i),r.push(s),e++}while((Math.abs(o.proArray[a.dim-2]-s.proArray[a.dim-2])>1e-5||Math.abs(o.proArray[a.dim-1]-s.proArray[a.dim-1])>1e-5||0===o.proArray[a.dim-2]||0===o.proArray[a.dim-1])&&e<35);return r}}},P={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"main"}},[a("div",{staticClass:"view-container",attrs:{id:"players-container"}},[t._m(0),t._v(" "),a("Players",{attrs:{playerWinDis:t.playerWinDis},on:{chooseFile:t.onChooseFile,setStart:t.onSetStart}}),t._v(" "),a("WinDisMatrix",{attrs:{transMatrix:t.transMatrix,playerSet:t.nowPlayerset,state0Prop:t.state0PropNow,endState:t.endState,dim:t.dim,stateArray:t.stateArray,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,K:t.K,B:t.B,start:t.start,playerWinDis:t.playerWinDis,chooseName:t.chooseName},on:{setShift:t.onSetShift}})],1),t._v(" "),a("MarkovStateCtl",{attrs:{shift:{stateID:t.shift.shiftStateID,type:t.shift.type},transMatrix:t.transMatrix,dim:t.dim,stateArray:t.stateArray,state0Prop:t.state0PropNow,allMarkovStateOri:t.allMarkovStateNow,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,K:t.K,B:t.B,start:t.start,strokeFromApp:t.strokeFrom,chooseName:t.chooseName}})],1)])},staticRenderFns:[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"system-header"}},[t._v("\n        SimuExplorer\n        "),a("div",{staticClass:"switch-style choose",attrs:{id:"style2"}},[a("p",[a("span",{staticClass:"legend player1"}),t._v(" "),a("span",[t._v("player1")])]),t._v(" "),a("p",[a("span",{staticClass:"legend player2"}),t._v(" "),a("span",[t._v("player2")])])]),t._v(" "),a("div",{staticClass:"switch-style choose",attrs:{id:"style1"}},[a("p",[a("span",{staticClass:"legend increase"}),t._v(" "),a("span",[t._v("increase")])]),t._v(" "),a("p",[a("span",{staticClass:"legend decrease"}),t._v(" "),a("span",[t._v("decrease")])])])])}]};var C=a("VU/8")(k,P,!1,function(t){a("kmtJ")},null,null).exports;e.a.config.productionTip=!1,new e.a({el:"#app",components:{App:C},template:"<App/>"})},UuEb:function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},"XfW/":function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},cAiI:function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},ewQB:function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},kmtJ:function(t,i){t.exports={advanceColor:"#FF4500",reduceColor:"#00BFFF",player0:"#7AC943",player1:"#7F4DB5"}},lIXE:function(t,i){},r9BZ:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set__=__webpack_require__("lHA8"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set__),__WEBPACK_IMPORTED_MODULE_2_d3__=__webpack_require__("vwbq"),__WEBPACK_IMPORTED_MODULE_3__services_Markov__=__webpack_require__("zi0F"),__WEBPACK_IMPORTED_MODULE_4__variables_scss__=__webpack_require__("UuEb"),__WEBPACK_IMPORTED_MODULE_4__variables_scss___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__variables_scss__);__webpack_exports__.a={name:"Players",props:["playerWinDis"],data:function(){return{advanceColor:__WEBPACK_IMPORTED_MODULE_4__variables_scss__.advanceColor,reduceColor:__WEBPACK_IMPORTED_MODULE_4__variables_scss__.reduceColor,start:0,chooseName:null,serveBtn:{btn1:!0,btn2:!1},genderSelectBtn:{btn1:!0,btn2:!1},genderSelected:0,genderOptions:[{text:"Male",value:0},{text:"Female",value:1}],typeSelected:0,typeOptions:[{text:"One",value:0},{text:"Two",value:1}],fileListAll:[{filename:"DingN.(RSh)",shownameEn:"Ding N. (RSh)",type:0,gender:1,choose:!0},{filename:"FengT.W.(RSh)",shownameEn:"Feng T.W. (RSh)",type:0,gender:1,choose:!1},{filename:"FukuharaA.(LSh)",shownameEn:"Fukuhara A. (LSh)",type:0,gender:1,choose:!1},{filename:"FukuharaA.(RSh)",shownameEn:"Fukuhara A. (RSh)",type:0,gender:1,choose:!1},{filename:"GuoYan(RSh)",shownameEn:"Guo Yan (RSh)",type:0,gender:1,choose:!1},{filename:"GuoYue(RSh)",shownameEn:"Guo Yue (RSh)",type:0,gender:1,choose:!1},{filename:"LiJ.W.(LSh)",shownameEn:"Li J.W. (LSh)",type:0,gender:1,choose:!1},{filename:"LiJ.W.(RSh)",shownameEn:"Li J.W. (RSh)",type:0,gender:1,choose:!1},{filename:"LiuS.W.(RSh)",shownameEn:"Liu S.W. (RSh)",type:0,gender:1,choose:!1},{filename:"LiX.X.(RSh)",shownameEn:"Li X.X. (RSh)",type:0,gender:1,choose:!1},{filename:"MaLin(LSh)",shownameEn:"Ma Lin (LSh)",type:0,gender:0,choose:!1},{filename:"MaLin(RSh)",shownameEn:"Ma Lin (RSh)",type:0,gender:0,choose:!1},{filename:"MaLong(LSh)",shownameEn:"Ma Long (LSh)",type:0,gender:0,choose:!1},{filename:"MaLong(RSh)",shownameEn:"Ma Long (RSh)",type:0,gender:0,choose:!1},{filename:"MizutaniJ.(RSh)",shownameEn:"Mizutani J. (RSh)",type:0,gender:0,choose:!1},{filename:"OhS.E.(RPh)",shownameEn:"Oh S.E. (RPh)",type:0,gender:0,choose:!1},{filename:"RyuS.M.(RSh)",shownameEn:"Ryu S.M. (RSh)",type:0,gender:0,choose:!1},{filename:"TieY.N.(LSh)",shownameEn:"Tie Y.N. (LSh)",type:0,gender:1,choose:!1},{filename:"TieY.N.(RSh)",shownameEn:"Tie Y.N. (RSh)",type:0,gender:1,choose:!1},{filename:"T.Boll(RPh)",shownameEn:"T. Boll (RPh)",type:0,gender:0,choose:!1},{filename:"T.Boll(RSh)",shownameEn:"T. Boll (RSh)",type:0,gender:0,choose:!1},{filename:"V.Samsonov(RSh)",shownameEn:"V. Samsonov (RSh)",type:0,gender:0,choose:!1},{filename:"WangH(LSh)",shownameEn:"Wang H. (LSh)",type:0,gender:0,choose:!1},{filename:"WangH(RSh)",shownameEn:"Wang H. (RSh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(LSh)",shownameEn:"Wang L.Q. (LSh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(RPh)",shownameEn:"Wang L.Q. (RPh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(RSh)",shownameEn:"Wang L.Q. (RSh)",type:0,gender:0,choose:!1},{filename:"WangN.(RSh)",shownameEn:"Wang N. (RSh)",type:0,gender:1,choose:!1},{filename:"ZhangJ.K.(LSh)",shownameEn:"Zhang J.K. (LSh)",type:0,gender:0,choose:!1},{filename:"ZhangJ.K.(RSh)",shownameEn:"Zhang J.K. (RSh)",type:0,gender:0,choose:!1},{filename:"ZhangY.N.(RSh)",shownameEn:"Zhang Y.N. (RSh)",type:0,gender:1,choose:!1}],draw:{width:0,height:0,padding:4},players:[],quantileUpRect:.9,quantileUpBar:.5,thresholdRect:null,thresholdBar:null,matrix:{matrixHeightReal:null,matrixWidthReal:null,transformY:null,transformX:null,rectSize:null,row:null,col:null,rowEnd:null,colEnd:null,rects:null,rowBar:null},label:{row:{},col:{},rowBar:{},colBar:{}}}},mounted:function(){this.$nextTick(this.onResize())},computed:{playerHeight:function(){return this.draw.width/9.5},genderIndent:function(){return this.genderSelected?"12px":"20px"},buttonWidth:function(){return.26*this.draw.width},buttonHeight:function(){return this.buttonWidth/5},lineWidth:function(){return this.draw.width-2*this.draw.padding-this.buttonWidth-50},pathStep:function(){return this.start?this.lineWidth/290:this.lineWidth/488},fileListChoose:function(){var t=this.genderSelected,i=[];return t?t&&this.fileListAll.forEach(function(t,a){t.gender&&!t.type&&i.push(t)}):this.fileListAll.forEach(function(t,a){t.gender||t.type||i.push(t)}),i}},watch:{fileListChoose:function(){if(this.playerWinDis){var t=this.findMaxWinDis(this.fileListChoose);this.drawPlayerList(this.fileListChoose,t)}},playerWinDis:function(){if(this.playerWinDis){var t=this.findMaxWinDis(this.fileListChoose);this.drawPlayerList(this.fileListChoose,t)}}},methods:{findMaxWinDis:function(t){var i=this,a=[];return t.forEach(function(t,e){var r=i.playerWinDis[t.filename].map(function(t){return t?Math.abs(t):0});a=a.concat(r)}),__WEBPACK_IMPORTED_MODULE_2_d3__.d(a)},mouseoverPlayer:function(t){t.isHover=!0},mouseleavePlayer:function(t){t.isHover=!1},clickPlayer:function(t,i){this.players.forEach(function(t,a){t.isSelected=a===i});var a=this.fileListChoose[i];this.$emit("chooseFile",[a.filename,a.shownameEn])},childMapParent:function(t){return t<9?0:t<12?1:t<15?2:t<18?3:t<24?4:5},calculateWinBar:function calculateWinBar(playername,maxWinDis,playerIndex){var vm=this;vm.matrix={},vm.label={row:{},col:{}};var winDisMatrix=new __WEBPACK_IMPORTED_MODULE_3__services_Markov__.g,winDisVector=vm.playerWinDis[playername];winDisVector.forEach(function(t,i){i<486&&t&&winDisMatrix.setWinState(t,i)});var stat1=[],stat2=[];winDisMatrix.matrix.forEach(function(t,i){t.forEach(function(t,i){t.winPro&&0!==t.winPro&&stat1.push(Math.abs(t.winPro))})}),winDisMatrix.group.forEach(function(t,i){t.winPro&&0!==t.winPro&&stat2.push(Math.abs(t.winPro))}),vm.thresholdRect=__WEBPACK_IMPORTED_MODULE_2_d3__.h(stat1,vm.quantileUpRect),vm.thresholdBar=__WEBPACK_IMPORTED_MODULE_2_d3__.h(stat2,vm.quantileUpBar);var show={row:new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set___default.a,col:new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set___default.a},showGroup={row:new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set___default.a,col:new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_set___default.a};winDisMatrix.matrix.forEach(function(t,i){t.forEach(function(t,a){0!==t.winPro&&Math.abs(t.winPro)>vm.thresholdRect&&(show.row.add(i),show.col.add(a),showGroup.row.add(vm.childMapParent(i)),showGroup.col.add(vm.childMapParent(a)))})}),winDisMatrix.group.forEach(function(t,i){0!==t.winPro&&Math.abs(t.winPro)>vm.thresholdBar&&show.row.add(i)});var splitNumRow=showGroup.row.size,splitNumCol=showGroup.col.size,rectSizeFromWidth=Math.round((vm.matrixAreaWidth-vm.draw.split*splitNumRow)/show.row.size),rectSizeFromHeight=Math.round((vm.matrixAreaHeight-vm.draw.split*splitNumCol)/show.col.size);vm.matrix.rectSize=Math.min(rectSizeFromWidth,rectSizeFromHeight);var rectSize=vm.matrix.rectSize,rowNow=0,colNow=0,rowNowEnd=0,colNowEnd=0;vm.matrix.row=[],vm.matrix.col=[],vm.matrix.rowEnd=[],vm.matrix.colEnd=[],vm.matrix.rects=[],vm.matrix.rowBar=[];for(var i=0;i<winDisMatrix.matrix.length;i++)vm.matrix.row.push(rowNow),vm.matrix.col.push(colNow),show.row.has(i)&&(rowNowEnd=rowNow+rectSize,rowNow+=rectSize),show.col.has(i)&&(colNowEnd=colNow+rectSize,colNow+=rectSize),8!==i&&11!==i&&14!==i&&17!==i&&23!==i||(showGroup.row.has(vm.childMapParent(i))&&(rowNow+=vm.draw.split),showGroup.col.has(vm.childMapParent(i))&&(colNow+=vm.draw.split)),vm.matrix.rowEnd.push(rowNowEnd),vm.matrix.colEnd.push(colNowEnd);vm.matrix.matrixHeightReal=colNow,vm.matrix.matrixWidthReal=rowNow,vm.matrix.transformY=(vm.draw.height-vm.draw.padding-vm.matrix.matrixHeightReal-vm.draw.labelArea)/2+vm.draw.labelArea,vm.matrix.transformX=(vm.draw.width-vm.draw.padding-vm.matrix.matrixWidthReal-vm.draw.labelArea)/2;var scaleW=__WEBPACK_IMPORTED_MODULE_2_d3__.l().domain([__WEBPACK_IMPORTED_MODULE_2_d3__.e(stat1),__WEBPACK_IMPORTED_MODULE_2_d3__.d(stat1)]).range([4,rectSize-4]),scaleR=__WEBPACK_IMPORTED_MODULE_2_d3__.l().domain([__WEBPACK_IMPORTED_MODULE_2_d3__.e(stat1),__WEBPACK_IMPORTED_MODULE_2_d3__.d(stat1)]).range([2,rectSize/2-2]);winDisMatrix.matrix.forEach(function(t,i){var a=[];t.forEach(function(t,e){var r=t.winPro;show.row.has(i)&&show.col.has(e)?a.push({stateID:t.stateID,id:27*i+e,x:vm.matrix.row[i],y:vm.matrix.col[e],indexr:i,indexl:e,value:100*r,width:rectSize,height:rectSize,cx:vm.matrix.row[i]+rectSize/2,cy:vm.matrix.col[e]+rectSize/2,r:0===r?0:scaleR(Math.abs(r)),widthDis:0===r?0:scaleW(Math.abs(r)),isNeg:r<0,isHighlight:!1,selected:!1}):a.push({stateID:t.stateID,id:27*i+e,x:vm.matrix.row[i],y:vm.matrix.col[e],indexr:i,indexl:e,value:0,width:0,height:0,cx:vm.matrix.row[i],cy:vm.matrix.col[e],r:0,widthDis:0,isNeg:!1,isHighlight:!1,selected:!1})}),vm.matrix.rects.push(a)}),vm.label.row.childLine=[],vm.label.row.childLabel=[];for(var rowChildLine=vm.label.row.childLine,rowChildLabel=vm.label.row.childLabel,indexr=0;indexr<vm.matrix.row.length;indexr++){var labels=winDisMatrix.getMatrixLabel(indexr).split("_");show.row.has(indexr)?(rowChildLabel.push({x:vm.matrix.row[indexr]+vm.matrix.rectSize/2,show:!0,childLabel:labels[1],parentLabel:labels[0],isHighlight:!1}),rowChildLine.push({x:vm.matrix.row[indexr]+vm.matrix.rectSize/2,show:!0,isHighlight:!1})):(rowChildLabel.push({x:vm.matrix.row[indexr],show:!1,childLabel:labels[1],parentLabel:labels[0],isHighlight:!1}),rowChildLine.push({x:vm.matrix.row[indexr],show:!1,isHighlight:!1}))}vm.label.col.childLine=[],vm.label.col.childLabel=[];for(var colChildLine=vm.label.col.childLine,colChildLabel=vm.label.col.childLabel,indexl=0;indexl<vm.matrix.col.length;indexl++){var _labels=winDisMatrix.getMatrixLabel(indexl).split("_");show.col.has(indexl)?(colChildLabel.push({y:vm.matrix.col[indexl]+vm.matrix.rectSize/2,show:!0,childLabel:_labels[1],parentLabel:_labels[0],isHighlight:!1}),colChildLine.push({y:vm.matrix.col[indexl]+vm.matrix.rectSize/2,show:!0,isHighlight:!1})):(colChildLabel.push({y:vm.matrix.col[indexl],show:!1,childLabel:_labels[1],parentLabel:_labels[0],isHighlight:!1}),colChildLine.push({y:vm.matrix.col[indexl],show:!1,isHighlight:!1}))}vm.label.row.parentLabel=[];var rowParLabel=vm.label.row.parentLabel,rowTempLabel={},rowTempText="";rowChildLabel.forEach(function(t,i){if(t.parentLabel!==rowTempText)rowTempLabel.text&&rowParLabel.push(rowTempLabel),rowTempLabel={x1:vm.matrix.row[i],x2:vm.matrix.rowEnd[i],text:t.parentLabel,type:vm.matrix.rowEnd[i]-vm.matrix.row[i]>vm.draw.gap?1:0,isHighlight:!1,startIndex:i,endIndex:i},rowTempText=t.parentLabel;else{rowTempLabel.x2=vm.matrix.rowEnd[i],rowTempLabel.endIndex=i;var a=rowTempLabel.x2-rowTempLabel.x1;show.row.has(i)&&(rowTempLabel.type=1,a>1.5*rectSize&&(rowTempLabel.type=2))}}),rowParLabel.push(rowTempLabel),vm.label.col.parentLabel=[];var colParLabel=vm.label.col.parentLabel,colTempLabel={},colTempText="";colChildLabel.forEach(function(t,i){if(t.parentLabel!==colTempText)colTempLabel.text&&colParLabel.push(colTempLabel),colTempLabel={y1:vm.matrix.col[i],y2:vm.matrix.colEnd[i],text:t.parentLabel,type:vm.matrix.colEnd[i]-vm.matrix.col[i]>vm.draw.gap?1:0,isHighlight:!1,startIndex:i,endIndex:i},colTempText=t.parentLabel;else{colTempLabel.y2=vm.matrix.colEnd[i],colTempLabel.endIndex=i;var a=colTempLabel.y2-colTempLabel.y1;show.col.has(i)&&(colTempLabel.type=1,a>1.5*rectSize&&(colTempLabel.type=2))}}),colParLabel.push(colTempLabel),vm.label.rowBar=[],vm.label.colBar=[];var scaleY=__WEBPACK_IMPORTED_MODULE_2_d3__.l().domain([0,.2]).range([0,vm.playerHeight/2]),zoomRadio=10;return vm.label.row.parentLabel.forEach(function(row,indexr){for(var startX=row.startIndex,endX=row.endIndex,valueArray=[],indexX=startX;indexX<=endX;indexX++)for(var indexY=0;indexY<=vm.matrix.rects[indexX].length-1;indexY++)valueArray.push(vm.matrix.rects[indexX][indexY].value);var averageValue=eval(valueArray.join("+"))/valueArray.length,isNeg=averageValue<0,rowBarTemp={averageValue:averageValue*zoomRadio,isNeg:isNeg,value:scaleY(Math.abs(averageValue))};vm.label.rowBar.push(rowBarTemp)}),vm.label.col.parentLabel.forEach(function(col,indexc){for(var startY=col.startIndex,endY=col.endIndex,valueArray=[],indexX=0;indexX<=vm.matrix.rects.length-1;indexX++)for(var indexY=startY;indexY<=endY;indexY++)valueArray.push(vm.matrix.rects[indexX][indexY].value);var averageValue=eval(valueArray.join("+"))/valueArray.length,isNeg=averageValue<0,colBarTemp={averageValue:averageValue*zoomRadio,isNeg:isNeg,value:scaleY(Math.abs(averageValue))};vm.label.colBar.push(colBarTemp)}),{rowBar:JSON.parse(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(vm.label.rowBar)),colBar:JSON.parse(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(vm.label.colBar))}},drawPlayerList:function(t,i){var a=this,e=this;e.draw.height=t.length*e.playerHeight+2*e.draw.padding,e.players=[];var r=0;t.forEach(function(t,s){var o=t.filename,l=t.shownameEn,n=e.playerWinDis[o],h=a.calculateWinBar(o,i,s),c=__WEBPACK_IMPORTED_MODULE_2_d3__.c().curve(__WEBPACK_IMPORTED_MODULE_2_d3__.b.alpha(.5)),d=__WEBPACK_IMPORTED_MODULE_2_d3__.l().domain([0,i]).range([0,e.playerHeight/2]),u=[],p=[],x=!1,w=!1;n.forEach(function(t,i){if(!(e.start&&i<198)&&i%2==0){var a=e.start?i-198:i;if(t){var r=t<0;x&&r!==w&&(p.push([(a-1)*e.pathStep,0]),u.push({path:c(p),points:p,isNeg:w}),(p=[]).push([(a-1)*e.pathStep,0]));var s=d(Math.abs(t)),o=r?s:-s;p.push([a*e.pathStep,o]),x=!0,w=r}else x&&(p.push([a*e.pathStep,0]),x=!1,u.push({path:c(p),points:p,isNeg:w})),(p=[]).push([a*e.pathStep,0])}}),u.push({path:c(p),points:p,isNeg:w}),e.players.push({name:o,nameEn:l,buttonX:0,buttonY:r+(e.playerHeight-e.buttonHeight)/2,centralY:r+e.playerHeight/2,winDisPaths:u,isHover:!1,isSelected:!1,rowBar:h.rowBar,colBar:h.colBar}),r+=e.playerHeight})},chooseFile:function(t,i){var a=this;this.fileList.forEach(function(i,e){t===i.filename?(i.choose=!0,a.chooseName=i.filename):i.choose=!1}),this.$emit("chooseFile",[t,i,this.chooseName])},setStart:function(t){this.start=t,0===t?(this.serveBtn.btn1=!0,this.serveBtn.btn2=!1):1===t&&(this.serveBtn.btn1=!1,this.serveBtn.btn2=!0),this.$emit("setStart",t)},setGender:function(t){this.genderSelected=t,0===t?(this.genderSelectBtn.btn1=!0,this.genderSelectBtn.btn2=!1):1===t&&(this.genderSelectBtn.btn1=!1,this.genderSelectBtn.btn2=!0)},onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight-30}}}},zi0F:function(t,i,a){"use strict";var e=a("Zrlr"),r=a.n(e),s=a("wxAW"),o=a.n(s),l={StrikeTechLabel:{0:"serve",1:"loop",2:"flick",3:"chop",4:"drop",5:"block"},BallPositionLabel:{"-1":"null",1:"short_forehand",2:"short_middle",3:"short_backhand",4:"half_forehand",5:"half_middle",6:"half_backhand",7:"long_forehand",8:"long_middle",9:"long_backhand"},StrikePositionLabel:{"-1":"null",0:"serve",1:"forehand",2:"backhand",3:"sideways",4:"anti-sideways"},WinLabel:{"-1":"",0:"player0 win",1:"player1 win"},MatrixLabel:{0:"loop_L/F",1:"loop_L/M",2:"loop_L/B",3:"flick_L/F",4:"flick_L/M",5:"flick_L/B",6:"chop_L/F",7:"chop_L/M",8:"chop_L/B",9:"drop_S/F",10:"drop_S/M",11:"drop_S/B",12:"drop_H/F",13:"drop_H/M",14:"drop_H/B",15:"block_L/F",16:"block_L/M",17:"block_L/B"},ServeMatrixLabel:{0:"serve_S/F",1:"serve_S/M",2:"serve_S/B",3:"serve_H/F",4:"serve_H/M",5:"serve_H/B",6:"serve_L/F",7:"serve_L/M",8:"serve_L/B"},WinMatrixLabel:{0:"serve_S/F",1:"serve_S/M",2:"serve_S/B",3:"serve_H/F",4:"serve_H/M",5:"serve_H/B",6:"serve_L/F",7:"serve_L/M",8:"serve_L/B",9:"loop_L/F",10:"loop_L/M",11:"loop_L/B",12:"flick_L/F",13:"flick_L/M",14:"flick_L/B",15:"chop_L/F",16:"chop_L/M",17:"chop_L/B",18:"drop_S/F",19:"drop_S/M",20:"drop_S/B",21:"drop_H/F",22:"drop_H/M",23:"drop_H/B",24:"block_L/F",25:"block_L/M",26:"block_L/B"}},n=a("by4E"),h=a.n(n);a.d(i,"f",function(){return c}),a.d(i,"c",function(){return d}),a.d(i,"d",function(){return u}),a.d(i,"a",function(){return p}),a.d(i,"g",function(){return x}),a.d(i,"e",function(){return w}),a.d(i,"b",function(){return m});var c=function(){function t(){r()(this,t),this.countMatrix=g(488)}return o()(t,[{key:"accumCountMatrix",value:function(t,i){t%2==i%2&&console.error(t+"_"+i),this.countMatrix[t][i]++}},{key:"calcProMatrix",value:function(){var t=this;this.keepRow=[],this.countMatrix.forEach(function(i,a){var e=0;i.forEach(function(t){e+=t}),0!==e&&t.keepRow.push(a)});for(var i=!1,a=function(){i=!0;var a=[];t.keepRow.forEach(function(e){var r=0;t.keepRow.forEach(function(i){r+=t.countMatrix[e][i]}),0!==r?a.push(e):i=!1}),t.keepRow=a};!i;)a();this.keepRow.push(486),this.keepRow.push(487),this.dim=this.keepRow.length,this.countMatrixNoZero=[];var e=[];this.keepRow.forEach(function(i){var a=[],r=0;t.keepRow.forEach(function(e){r+=t.countMatrix[i][e],a.push(t.countMatrix[i][e])}),e.push(r),t.countMatrixNoZero.push(a)}),this.proMatrix=g(this.dim),this.countMatrixNoZero.forEach(function(i,a){i.forEach(function(i,r){a>=t.countMatrixNoZero.length-2?t.proMatrix[a][r]=a===r?1:0:0!==e[a]&&(t.proMatrix[a][r]=i/e[a])})})}}]),t}(),d=function(){function t(i,a){r()(this,t),this.player=i.player,this.stroke1=i,this.stroke2=a,this.id=-1;var e=this._calcID(i,a);e>-1&&(this.id=2*e+this.player)}return o()(t,[{key:"_calcID",value:function(t,i){if(-1===t.ballPos||-1===i.ballPos)return-1;if(0===t.strikeTech&&1===i.strikeTech)return t.ballPos>=4&&i.ballPos>=7?3*(t.ballPos-4)+(i.ballPos-7):-1;if(0===t.strikeTech&&3===i.strikeTech)return i.ballPos>=7?18+3*(t.ballPos-1)+(i.ballPos-7):-1;if(0===t.strikeTech&&2===i.strikeTech)return t.ballPos<7&&i.ballPos>=7?45+3*(t.ballPos-1)+(i.ballPos-7):-1;if(0===t.strikeTech&&4===i.strikeTech)return t.ballPos<7&&i.ballPos<7?63+6*(t.ballPos-1)+(i.ballPos-1):-1;if(1===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?99+3*(t.ballPos-7)+(i.ballPos-7):-1;if(1===t.strikeTech&&5===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?108+3*(t.ballPos-7)+(i.ballPos-7):-1;if(2===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?117+3*(t.ballPos-7)+(i.ballPos-7):-1;if(2===t.strikeTech&&5===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?126+3*(t.ballPos-7)+(i.ballPos-7):-1;if(3===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?135+3*(t.ballPos-7)+(i.ballPos-7):-1;if(3===t.strikeTech&&3===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?144+3*(t.ballPos-7)+(i.ballPos-7):-1;if(4===t.strikeTech&&1===i.strikeTech)return t.ballPos>=4&&t.ballPos<7&&i.ballPos>=7?153+3*(t.ballPos-4)+(i.ballPos-7):-1;if(4===t.strikeTech&&2===i.strikeTech){if(t.ballPos<7&&i.ballPos>=7)return 162+3*(t.ballPos-1)+(i.ballPos-7)}else if(4===t.strikeTech&&3===i.strikeTech){if(t.ballPos<7&&i.ballPos>=7)return 180+3*(t.ballPos-1)+(i.ballPos-7)}else if(4===t.strikeTech&&4===i.strikeTech){if(t.ballPos<7&&i.ballPos<7)return 198+6*(t.ballPos-1)+(i.ballPos-1)}else{if(5!==t.strikeTech||1!==i.strikeTech)return-1;if(t.ballPos>=7&&i.ballPos>=7)return 234+3*(t.ballPos-7)+(i.ballPos-7)}}}]),t}(),u=function(){function t(i){r()(this,t),this.id=i,this.player=i%2?1:0,this.stroke1={},this.stroke2={},this._splitState(i)}return o()(t,[{key:"_splitState",value:function(t){var i=parseInt(t/2);i>=0&&i<18?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt(i/3)+4,this.stroke2.ballPos=i%3+7):i>=18&&i<45?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-18)/3)+1,this.stroke2.ballPos=(i-18)%3+7):i>=45&&i<63?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=2,this.stroke1.ballPos=parseInt((i-45)/3)+1,this.stroke2.ballPos=(i-45)%3+7):i>=63&&i<99?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=4,this.stroke1.ballPos=parseInt((i-63)/6)+1,this.stroke2.ballPos=(i-63)%6+1):i>=99&&i<108?(this.stroke1.strikeTech=1,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-99)/3)+7,this.stroke2.ballPos=(i-99)%3+7):i>=108&&i<117?(this.stroke1.strikeTech=1,this.stroke2.strikeTech=5,this.stroke1.ballPos=parseInt((i-108)/3)+7,this.stroke2.ballPos=(i-108)%3+7):i>=117&&i<126?(this.stroke1.strikeTech=2,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-117)/3)+7,this.stroke2.ballPos=(i-117)%3+7):i>=126&&i<135?(this.stroke1.strikeTech=2,this.stroke2.strikeTech=5,this.stroke1.ballPos=parseInt((i-126)/3)+7,this.stroke2.ballPos=(i-126)%3+7):i>=135&&i<144?(this.stroke1.strikeTech=3,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-135)/3)+7,this.stroke2.ballPos=(i-135)%3+7):i>=144&&i<153?(this.stroke1.strikeTech=3,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-144)/3)+7,this.stroke2.ballPos=(i-144)%3+7):i>=153&&i<162?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-153)/3)+4,this.stroke2.ballPos=(i-135)%3+7):i>=162&&i<180?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=2,this.stroke1.ballPos=parseInt((i-162)/3)+1,this.stroke2.ballPos=(i-162)%3+7):i>=180&&i<198?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-180)/3)+1,this.stroke2.ballPos=(i-180)%3+7):i>=198&&i<234?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=4,this.stroke1.ballPos=parseInt((i-198)/6)+1,this.stroke2.ballPos=(i-198)%6+1):i>=234&&i<243&&(this.stroke1.strikeTech=5,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-234)/3)+7,this.stroke2.ballPos=(i-234)%3+7)}},{key:"StrikeTechName1",get:function(){return l.StrikeTechLabel[this.stroke1.strikeTech]}},{key:"StrikeTechName2",get:function(){return l.StrikeTechLabel[this.stroke2.strikeTech]}},{key:"BallPositionName1",get:function(){return l.BallPositionLabel[this.stroke1.ballPos]}},{key:"BallPositionName2",get:function(){return l.BallPositionLabel[this.stroke2.ballPos]}}]),t}(),p=function(){function t(i,a){r()(this,t),this.dim=a.length,this.stateArray=a,this.proArray=i}return o()(t,[{key:"calcNextMarkovState",value:function(i){return new t(h.a.dot(this.proArray,i.proMatrix),this.stateArray)}},{key:"calcNextWinState",value:function(i){var a=[],e=[];return this.proArray.forEach(function(t,r){a.push(t*i.proMatrix[r][i.dim-2]),e.push(t*i.proMatrix[r][i.dim-1])}),[new t(a,this.stateArray),new t(e,this.stateArray)]}},{key:"shiftPro",value:function(i,a,e,r){var s=this,o=a[i];if(i%2!=1){var l=this.stateArray[o],n=this.proArray[o],h=l.stroke1,c=[],d=[];this.stateArray.forEach(function(t,i){0===t.player&&t.stroke1.strikeTech===h.strikeTech&&t.stroke1.ballPos===h.ballPos&&(c.push(t),d.push(s.proArray[i]))});var u=_(d),p=n/u;if(1===p||0===u)return this;var x=this.proArray.slice(),w=(p+(e+4*r*p*(1-p)))*u,m=w-n;w>1&&(w=1,m=1-n),m>u-n&&(m=u-n);for(var g=0;g<c.length;g++){var v=c[g];if(v.id===i)x[o]=w;else{var f=m*(this.proArray[a[v.id]]/(u-n));x[a[v.id]]-=f}}return new t(x,this.stateArray)}console.error("id wrong in shiftPro")}},{key:"shiftProGroup",value:function(i,a,e,r){var s=this,o=a[i];if(i%2!=1){var l=this.stateArray[o].stroke1,n=[],h=[],c=[],d=[];this.stateArray.forEach(function(t,i){0===t.player&&t.stroke1.strikeTech===l.strikeTech&&t.stroke1.ballPos===l.ballPos&&i<s.dim-2?(n.push(t),h.push(s.proArray[i])):0===t.player&&i<s.dim-2&&(c.push(t),d.push(s.proArray[i]))});var u=this.proArray.slice(),p=_(h),x=_(d),w=p+x,m=p/w;if(0===p||0===x||0===w)return this;var g=(m+(e+4*r*m*(1-m)))*w,v=g-p;return g>1&&(g=1,v=1-p),v>x&&(v=x),n.forEach(function(t){u[a[t.id]]+=v*(s.proArray[a[t.id]]/p)}),c.forEach(function(t){u[a[t.id]]-=v*(s.proArray[a[t.id]]/x)}),new t(u,this.stateArray)}console.error("id wrong in shiftProGroup")}}]),t}(),x=function(){function t(){r()(this,t),this.matrix=function(t){for(var i=[],a=0;a<t;a++){i.push([]);for(var e=0;e<t;e++)i[a][e]={winPro:0,stateID:-1}}return i}(27),this.group=function(t){for(var i=[],a=0;a<t;a++)i[a]={winPro:0,stateID:-1};return i}(27)}return o()(t,[{key:"setWinState",value:function(t,i){var a=new u(i),e=this._calcMatrixIndex(a.stroke1),r=this._calcMatrixIndex(a.stroke2);this.matrix[e][r]={winPro:t,stateID:i}}},{key:"setWinStateGroup",value:function(t,i,a){this.group[i]={winPro:t,stateID:a}}},{key:"judgeHasShift",value:function(t,i){var a=new u(t),e=this._calcMatrixIndex(a.stroke1);return i.has(e)?-1:e}},{key:"getMatrixLabel",value:function(t){return l.WinMatrixLabel[t]}},{key:"_calcMatrixIndex",value:function(t){return 0===t.strikeTech?3*t.strikeTech+(t.ballPos-1):t.strikeTech<4?9+3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+18:t.ballPos-7+24}}]),t}(),w=function(){function t(i,a,e,s,o){r()(this,t);var l=i.stateArray,n=i.proArray,h=null,c=null;a&&(h=a.proArray,c=e.proArray),this.stateMatrix=v(18,18);for(var d=s;d<486;d+=2){var u=o[d];if(void 0!==u){var p=l[u],x=p.stroke1,w=p.stroke2,m=this._calcMatrixIndex(x),g=this._calcMatrixIndex(w);-1!==m&&-1!==g&&(this.stateMatrix[m][g].Ori=n[u],h?(this.stateMatrix[m][g].Shift=h[u],this.stateMatrix[m][g].Dis=h[u]-n[u],this.stateMatrix[m][g].DisAccum=c[u]-n[u],this.stateMatrix[m][g].DisNow=h[u]-c[u]):(this.stateMatrix[m][g].Shift=0,this.stateMatrix[m][g].Dis=0,this.stateMatrix[m][g].DisAccum=0,this.stateMatrix[m][g].DisNow=0))}}this._calcRowColSum()}return o()(t,[{key:"_calcRowColSum",value:function(){var t=f(18),i=f(18);this.stateMatrix.forEach(function(a,e){var r=0,s=0,o=0,l=0,n=0;a.forEach(function(t,a){r+=t.Ori,s+=t.Shift,o+=t.Dis,l+=t.DisAccum,n+=t.DisNow,i[a].Ori+=t.Ori,i[a].Shift+=t.Shift,i[a].Dis+=t.Dis,i[a].DisAccum+=t.DisAccum,i[a].DisNow+=t.DisNow}),t[e].Ori=r,t[e].Shift=s,t[e].Dis=o,t[e].DisAccum=l,t[e].DisNow=n}),this.rowSum=t,this.colSum=i}},{key:"getMatrixLabel",value:function(t){return l.MatrixLabel[t]}},{key:"_calcMatrixIndex",value:function(t){return 0===t.strikeTech?-1:t.strikeTech<4?3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+9:t.ballPos-7+15}}]),t}(),m=function(){function t(i,a,e,s,o){r()(this,t);var l=i.stateArray,n=i.proArray,h=void 0,c=null;a&&(h=a.proArray,c=e.proArray),this.stateMatrix=v(9,18);for(var d=s;d<486;d+=2){var u=o[d];if(void 0!==u){var p=l[u],x=p.stroke1,w=p.stroke2,m=this._calcMatrixIndexR(x),g=this._calcMatrixIndexL(w);-1!==m&&-1!==g&&(this.stateMatrix[m][g].Ori=n[u],h?(this.stateMatrix[m][g].Shift=h[u],this.stateMatrix[m][g].Dis=h[u]-n[u],this.stateMatrix[m][g].DisAccum=c[u]-n[u],this.stateMatrix[m][g].DisNow=h[u]-c[u]):(this.stateMatrix[m][g].Shift=0,this.stateMatrix[m][g].Dis=0,this.stateMatrix[m][g].DisAccum=0,this.stateMatrix[m][g].DisNow=0))}}this._calcRowColSum()}return o()(t,[{key:"getMatrixLabelR",value:function(t){return l.ServeMatrixLabel[t]}},{key:"getMatrixLabelL",value:function(t){return l.MatrixLabel[t]}},{key:"_calcRowColSum",value:function(){var t=f(9),i=f(18);this.stateMatrix.forEach(function(a,e){var r=0,s=0,o=0,l=0,n=0;a.forEach(function(t,a){r+=t.Ori,s+=t.Shift,o+=t.Dis,l+=t.DisAccum,n+=t.DisNow,i[a].Ori+=t.Ori,i[a].Shift+=t.Shift,i[a].Dis+=t.Dis,i[a].DisAccum+=t.DisAccum,i[a].DisNow+=t.DisNow}),t[e].Ori=r,t[e].Shift=s,t[e].Dis=o,t[e].DisAccum=l,t[e].DisNow=n}),this.rowSum=t,this.colSum=i}},{key:"_calcMatrixIndexR",value:function(t){return 0===t.strikeTech?t.ballPos-1:-1}},{key:"_calcMatrixIndexL",value:function(t){return 0===t.strikeTech?-1:t.strikeTech<4?3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+9:t.ballPos-7+15}}]),t}();function g(t){for(var i=[],a=0;a<t;a++){i.push([]);for(var e=0;e<t;e++)i[a][e]=0}return i}function _(t){var i=0;return t.forEach(function(t){i+=t}),i}function v(t,i){for(var a=[],e=0;e<t;e++){a.push([]);for(var r=0;r<i;r++)a[e][r]={Ori:0,Shift:0,Dis:0,DisAccum:0,DisNow:0}}return a}function f(t){for(var i=[],a=0;a<t;a++)i.push({Ori:0,Shift:0,Dis:0,DisAccum:0,DisNow:0});return i}}},["NHnr"]);